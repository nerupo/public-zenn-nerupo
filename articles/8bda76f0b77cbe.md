---
title: "TypeScript „Åß„Å§„Åè„ÇãÂûã„É¨„Éô„É´Ê≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª"
emoji: "üß©"
type: "tech"
topics: ["TypeScript", "Ê≠£Ë¶èË°®Áèæ", "Âûã", "Âûã„É¨„Éô„É´„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞"]
published: false
---

# „ÅØ„Åò„ÇÅ„Å´

„Åì„ÅÆË®ò‰∫ã„Åß„ÅØ„ÄÅÊ≠£Ë¶èË°®Áèæ„ÇÑË®ÄË™ûÂá¶ÁêÜÁ≥ª„ÅÆ„Åó„Åè„Åø„ÄÅÂûã„É¨„Éô„É´„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Á≠â„Å´„Å§„ÅÑ„Å¶ÁêÜËß£„Åó„Å™„Åå„Çâ„ÄÅTypeScript „ÅÆÂûã„Ç∑„Çπ„ÉÜ„É†‰∏ä„ÅßÂãï‰Ωú„Åô„ÇãÊ≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„Çí„Å§„Åè„Çã„Åì„Å®„ÇíÁõÆÊåá„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆË®ò‰∫ã„ÅÆÂÜÖÂÆπ„ÇíÂÆå‰∫Ü„Åô„Çã„Å®„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™Âûã„Çí„Å§„Åè„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

```ts
// Ê≠£Ë¶èË°®ÁèæÊñáÂ≠óÂàó„Åã„Çâ TRegExp Âûã„Çí‰ΩúÊàê
type EmailRegExp = TRegExp<"^.+@.+\\..+$">;
// Ê≠£Ë¶èË°®Áèæ„Å´„Éû„ÉÉ„ÉÅ„Åô„ÇãÊñáÂ≠óÂàó„Åß„ÅÇ„Çå„Å∞ true Âûã„Å´„Å™„Çã (ValidEmail: true)
type ValidEmail = TRegExpTest<"piyo@hiyoko.com", EmailRegExp>;
// „Éû„ÉÉ„ÉÅ„Åó„Å™„Åë„Çå„Å∞ false Âûã„Å´„Å™„Çã (InvalidEmail: false)
type InvalidEmail = TRegExpTest<"piyo.com", EmailRegExp>;
```

‰ªäÂõû„ÅÆÂÆüË£ÖÂÜÖÂÆπ„ÅØ [„Åì„Å°„Çâ](https://www.typescriptlang.org/play/?ts=5.8.3#code/PQKgBApgHghgtgBwDYTCYAoDxhkMbWg8ZGAWEYH-Og4aaDq2oOhKg0gyCRDGACoBKEA5gKJQJiDR6oEkMgHXlACEYYALgE8EqDnBgBLJK07cwAXibKuCADwAiAHoA6ANQABUwB1LR0wBI9APgDc2XIVKBrBkB7DIGGGQIMMgJoMgNEMlFSA5gyAQgyAMQyADgxgYgBOAK6ovJ6AVgzBYAAUAGowSPIAJrIKSABcCSkQAJTiUqgFRaVyiuqa7NqMEADOYvoI8hIA9mYAFsMjANYjRgDGI3B6ADRgZYpa3C5uYH7+gOoMGYCKDHFgAGaFvWmZ2TkAkgB2AG6FJRuVF1d1DdJgT68Wh8Oiwutwev1BlMFktVus2kowQgdlhsOBkmJFL00JhfqgACLyc7nHQAZUgUDEEEexWxyUe00eIwA7o8ANoAXTWjApVJpdIZTNZnMcHUJxKeVMSj0KZO5KMkf3F50lEGlsowYDA5OgfNpYHpjJZ7K5mqYvOp+sNQpNKzNrF6ySQYgt-INguNnI6nIwoo0OspluxbPkj3OarAAAkIDBimtbEZQ+HEkxyhyzQB+dZQeT9Xo6RhraOx0W6oPVVJmrVZ5Wq9VIAvlblrB1OsSOKtgKq1x5SmUNxhNphrNkJ1vOosx4ocjtaqrjsSuPHrACOyVlAA01gBNP25AuOHK1dSinllt0bsBZgCMXbAACZj+f9TozYxfUeT+bn9jt1ewLeVT3pmFYQGaVSXEg1xLoqMg5nmBaulaHrClyYAAKp7megZumyZpJhGxZxmaCYESmg6KBg6bVqu64NkRayYUh2JJJWWo0axYHsXeXC5mI+YUUgjGznekHQVgsH-L2arXPMmIjI8r5agGeoCkaqF2lq2Gqe66kmr6HR1rJ8mPHW-ZykwCqNFJUrGfIClmRqynMbpNqcpp344chenufafRti51qehy3rpnuKnliGYaEVO8a2GRqaKNR-68QhhZRlOpZeSxNSdlmRkQHJ9mmdJ9aNoozZgKOtgLpOsYzp2VQFUVDmleZgmVQuInzv5zowdZAAyMCQtp5ZBahWEudVibRSmAD6awJUN-TJVmy1iOBYCPBAzxqv1fzoY88hrhAiE-q5wV7odx2pI5A5WQdR0nXdSmeTp422n5jrOoFKEmqFBkaKNuEJQxYCkbNiVIKtGWxi5C5so8yRwAARmqyU0ddz1tbKHVgF1jUYU9t04wOQ7TbVsPTt1+O9YuqJogkMzUjiEnWYwzOPB0ADeCSNFU-SJKGbBgAAvvtqAc9M1IDQACjAiQs0DnNgAAZGAvOwVUehywAgswHAAHJ6GLriSVL1LMPLitc8r0tc+rmv82AehW-rRsm+Ly4W4810KSCKuO3z0ja+hhv3AA8sbpve5zstIMk2J2yzQday7ssDehpKe2b7Oc6SYgKwH9tqxrwcQNrpKMPrOex-bEcICZxcp2Xad6BHsuMJH0de+bnP4iMLrJw7rfO3o+IR4wtd9-bADC4wKzos8uYLwtYYHo8hy7s+RjXzhgPMC+JFUy+93n9u648h8jIkBcK0PTAb07W96Lrhs7xHzBzVX+tTzHM-UkvtfRIHAaTNxHs-CuLs34fy-kbfEtc67UgALIwB4BobmZo9A5D0FUH2csFbUlcFqPQtRcGP3tlbQhjxiEuwAD7kJ9n7GhWCTCMLjgnXotC9AgHYfbO+iRuEZj4dSBuJluFGBEY8Ae9MSEGCkUA8YN8BGyLAHYPBnNFE31AcUVwXtUSgDACgKAEZ0Bsz+ANaAaoyQrySGvDoliTGJBeqSB6qBHFqhemaCKbpV6PDYB5H22Jzo+y9BoH04UXIAAM7Dc1BlOUWsSEqCVFlEkCREXLS1GOcChKC0F5TAB45xpNypCSqgmIJ3JOaoIQGyIiHIGrcSqBk86ehrB6AKYJaJSTIYcF6PMNBEBijzwVokuJvT+mDOKCktJ3EaJFJen0gZ0hpnkwqZzXoVS55Hx0EsqZIzEiOEaXMqo21dqJEJi07KYA-FsAKQskpeNpqVNyY8A5OgiJHJEnOLaO01SbUwXMpm9tegaJBbQrU+jJJFIXDzM0YgNlgupJyPRS4sCGOGi6Mxy5dZV0NiMYoqAMFgBKALOx-j95p1uTHHFeKCUQGYCMQe9xigdD0AAYj0LnP4uLGD4sJYyweS9JhIFZedXl-KiVgAlfSvcMrCWl0BSS4oVR5UMqZWIFltC27MAjpPLlZpD6KBVWAeexrUXmNQGq5hLKdDW2pJqsV1y1Vsj0CUPQM4OgxO5va3sLLRbJCidyq1dLCU2uKANO11DHUuRdW64oHq9zet9Y6gNABaJAQbaV8vpeG5gUabYxvFaGiArr3Weo0Mm6N-rkhpsSFmyS1qjoKVeimllsaS1loTSFDQcby0eQGma0VHac0Kt7SWjyzAh1Op0mqjoarAbSpLYq-CJqm3FVtW24oOwtRtzDt3A1WoUDnDEFUQdIrdFmiFmwcYp78bTotdmyVs8FIDMdQWh17bi2jtLfGxNXrYlbtFvMBt1k1UvqvjAR1kat0jslV2-9lbAPVuKMBjNoGeUlog2+ll+bYPfvg3+itYAq2Fv9fMOtGGQ0-uw1B1tKG4P0oQz2pdP7mMDunYxsdrHJWTs4wR+l86S2LrnY7VdqqsOvqg5ulDO7y7a1nlHWeusp60OPXe895qr3yBvXeqdF7H2NpLfHROMmyMzvLH27tSbkPmdFggKjPH6UmfzGafDzrO1EaE2xojHl+MeZ-d5yVInl1ia1KSpzhKXNmc-du7VY8M5Z0PQfC9J8DMYChWBktAiYt+os26KziGSO2di6LXojm1UCPo+Zrjv7y1BaY75s0-nZ3LvHT+kLgWwvKokz+nLxQP15bk23H+zBktGtFWlrTmXMM-rERugb7nWs+fLTZn1KHRYjAqyW+bLa3MMYE4S5jDWjtNa1C1yzbXItgTlaFjW4nru7dMot2T8WX4dy7lHcbqXTXpZm9RyVMjctFoC4R1bAH1t2eKNtn9MjBsg+W2D7tJ26vWfUGaUT93uIRbVUDl75m5O7rHhPVTZp-vXYOba-bNXDuo49X5o+tihb+MXaR0rFHYkHNFmmmHz6dnU9i7V477Wkf0+a4z861KNC3M65Kld4W11YaPsDllawDnDbHjvPehqj5pYVoZrLP7rbXA4IkRIN8Ufy56y7dlapzeJGS23DgzBdVjcfei8ACAFbXBTNiySxvrFBJcqEit1PrhPYLBsrKOkEoB6e7C86Srd2IteSizsIxG7FTwVsBAT3aGiwKUnuZmLeuSsFQMTsQKA-MO0IkHQary+q7AHHzPCkEZ6ARSCxNlf2KE7mRnkyVQW8mXbwP4qHqIXsQL00355yJbN+92qWFGCzQl+u+X2hY+FLZ6RHnjL8-h-FVekHkJnNfJaie8HnPl+MEF-XiCqaPstG30LokMQcUZrJlpv0YPZ+GkgUPxbQdHfzAEvyDhgCviURf3viqE4jFhphP2uWmgSmAN-3tncleWfx0RhkAMUmALWDALLggOAR0VgJqHgIBR7072pFBVeS4R7y30eCqD324n0RwDAB0HpGKjTWgAQEOS7AqA0B0EWEgzEB4O4H4P3Sjg4K4IUnEL4NFDoQ4JELfXkMOWXGr2bUeFr2q0F0l3JQCTfA2TQORVNC1EsRPUQJ0hDwBnvxoKmniThlP3tg-2SXKBMJNBhjwir0X1ozEB0PXQcgjXhxZUcDWAsLECCTCJ7wYh700OKgCJLTzRCO3W5HKG+TABCnOm8LmVj18Kk38IkIT1B3pQ8m4iYS0LKPYjyMSGuBryKLplq07Axn-DZADz8Nr0pniIUk6LpiyOyh7y1CULZDVQD1N3tzWA+haO4mGI+jWFGMX3GJvmmP-G6O0IkJSLSIqnKVsAiJeXqQyJ+UCMUi3TWHaIKN6O+hALWMuLbAyKH0X3qL4M2KhhHATD2I2Tqmpk2nONEJ0NOMKQgEsKjyXHYOEIKLUNFAqEEI4OQETkhOUIhN4P4KUJ0DhN6EhI0PyL+I2IFzyyZ2FkCWMOcNMIHSBMiOJOuRsPCTCnAWCSQMcPy31B9lcMhi6RJM8JAhyO4gDxc0SJowKJZRg1kzeN2PJP2KnBnCqK1F+LfX5OfUFOKDwxFKhgyP6J0m5OqMhl5M4VuJ+lp2lJJW1OxLlIaKuKaO4haKzDaMXz5LNLbDOJNKgz1LEHVKDEGLAGGIWNqIgCWMSEmL+hWKGKqjmOuzGLN2WJ7yzFlOdI2IBKeXePFM+KpmORn3AwKJeJ1MThdMdJ9I6PtOdHuIXzzIuLjJQy2LKWmg+JBS+OOQeJ9LtOeIBOrJoJRDBPRIROhKEMuDkhvgRMS3JFRP6AVkxP91tN1NxJlIO2uVuSJIfw5IiTpKmghi-wADEYBezEgrDywQ8tlqQXMcDF91zNydCe9RjOEVdUie9jyEUtyNlOxo9ywajrgbztECyXRacCkA9XyQF3zatwz7cozizrgBF-jyy6DDi7xzzE5MyjyNzbyXSiyA9QKyzzM9zHhegaZkLX8wK0KILQTcAdBhzEhOyYSdAezbyETRtPSODGDRzrJsKFZTypyacZyDC5z7CFzaTh56SNSVyIwfzty3RdzXkBFDyfSfzmK5lKtX9LzoigVBL7zuJHy3RnyIBJK-zPzuJoy4KTzNKSiotFiIyLkgUdKfSntcLYt0LMKe9S96UqsATvz4K3y+CCYZ9cDLK8trKsLF8LLUKrL8L0VCK6LkSoSyKKK+zQrQDO5u4aLyLnKSLQqsTzLW91jni8SEdyxZyjD5yqS-9F0hL9RkDIZFLcrrC-90KntxKXyEqpLuI1Uns5LDTSqaCHyXI1KNLXLGitL2IzKaq9KurzTacAKb4gKnKBq694yo9bLHtUrYKJLar3ykLdKEL-KvKIKfiVqXLJrwKoiCKOCIrEqJCwqNA9YDZDYZCtCES3ZzqaKScaKtdmAcgoB6gxyFqJrdD8T9DmdDCtJKTyr0DuK6CpocqZZfUPJ+KUxmFCrsRdzQbHgqEbYqIQJob-rIorSKcdkAS9AnBCYbi1rHVGItCojNoYaqofYZEYZcchUt0EC0bcIfZ3kEoDkCT-EjkQJwMsbwL1dNpvSTdjK0VGYwwYBWZlxDZVzcVC4qQOhblg11gEBegWaNAkYkAkB59xaVNEgIDeh5Am4V8tRzhzc4AqgNa74qRtURgTaJazaIBaFD4FYyUfqaKOAFaDkDc-gNa4UtRhyqRaDTapbS0ORtUtaMLdbio-aJbGAQ6daTI09vbX871-aoNbbV95h5gIBG4rbJbk6099EPctpLg00UZkhjVTFcRJINaAAhEu0VaxOXWncvPcJVYWrO6u0u4pPsWUSVHYcnKumuwlRIZfLHAumALO921APu9ul6eugyiAPcGexHelcvECSe2ujutUcyQjCbazTaBey7H9ZhFeiWtute5hHQbu3ewTWnPwo+3WE+gevw8+2VS+hVYazhW+++tUFzJ+wlGmPegrbLV-D+-utUKrC+n5f+-UBq1K4B9uiPcBu8SB7EamjaGiVegeuHBBk2q+2eg5WBte95LB2fPaS1MAdBtUM+s0JB67ZhAdT286T2jQch9esqQjdTRNSdeh65Rhsh4+kBlhzexra9W9bvJus0H2voKoKsjW11CR3oencGGqGRvQORhR71UXDkUWMwAABiiSDvhWjrDoUloM1PeOUaSG1qMYwrF24jHHMcMZMnkbMPYl5kNqWCqHUca3LS0d0cpUtsKWUeIrEAnxSwdvlsVsZ1FiqNcaNo8diQ0Z8aDSZnnECYTpCftuPnCZZun0yNoSCbie5gSZ0azS1A3PTszp2KMAGmUbKYzuCbQjsYltdVqcbg9X0d7r4fbsfqoZwcXsJT8LoYlpch4eYensa3YalPtC4Z0hGc6bXrGdO2EfqY7DEfjuTpMbMaaZUYDqcY-2YFSfWbaeDssccakc7E2d1ldQsdDscZsfYkacuY7wcfDrua1AqWeeMdXKNptvzGqa2ZafqZbAObfwUZdoiYVhEn0bWbfzPWBfqdoQBZSf+bTrqYn331IeYe-p6dftnpcz82mfLFmbvv4YWd-W3tEa9puR2ZPgOd9rRd3Q+YwrOdsdsFnnsZOZeecbedsCjo5c+e+Z2aXhqZRdabQjZa2aCdBddqPkhbyYTppYlbSahbAERdNWFfKfhfRbFrmYHqq2xdQFpwEXxaGYYaGaYZ1c8RKS3ovQpf1qpfWYVcedUeVeuZjvDuZfudZfZZuc5aqPeb5Ywq+aWB+aFeRY1YUfFadaVbWDBZ5q1GVfybVcVfvnpZVZFbvWmkjeafTYjbhaOa1YrotcSAj31dqye2Nd1mGbNd4eJanqtca3JYalWftd9sddkZ2dTddasdoKzaeYDacblZgKTajZTeVdVczfVdRbFbzYaXHprc-sSEwd6f3sB0Hmbbkakc8dO28eKbWC3bp00bMGvD0eOZ9eMY9a1CLwNtieK0Ka8e7UScn2TwKaKePafdCcydls7ByYTfldvaKd8dTo1c3fifvY9S0ePfafVqLcIeXYAZoxlcpY3aqn3eY0Sb3dA+3YfaPZPYMf7YveHu4jceNv-bA8PcA6BQRRfbI4g5KbmQyewdOwydTchTNF-aHdQ6I0faA7qZA7vaw-A5w6g9Id5bPcDYFfWdeiDbgB+arezqpHP0fhtrk5toZyLlNc1oDddWY6BqVTZCeEJSgCNLACyRGByWk5+Y5CqCL2I6qAs52f05pGgGVefaU4DsnwY9+31zJ3dyFsLqsXmFFsLd1i4EKleieAQAxAJbdA1o8gi4xALidu+uFkXQ1tC-mBeni7EFi6kki7EES7Xmg5C5MXmCHqVQBaGSqBRiZRQAgLjrAEmH6BvnkEkZrZts5FzqK-S68S1Cy+i-1Fi7NCy4K-8VZt+u1B2ZU4DrCSqj6+TZBYaQ8l1nTaGRcmq5GFq-+hpI8kjD4ma76Cm5zo5Bm8XI0GG4MO6XGS-yIjGTcMUFSVvu65KR7zm91kNI6h70Nl1B+YAHVdbxgwXFAFJZ4kARhHRFYyQdmvi1hXurnGWnH5K5lppluNWhkYfegUe6mhlIf1mYfHg8uNajlDTppdumuhY+g1hLOHzKCgUKuTVkeVu4x-gMfGecffa8eCeJajl33GvbyWuNnbBSe+eKeJv1mXOaVJJ7gWfUeBtZONP2u0JXu5O9xmoTJXofm4v8eouw2p2DJsiYYxIuI7xOJ1bvudm-uxAAeFage3lQfwfTozR7P1nDuFPnGWbkv-FAl4e5PRO3WFJTvwmbeQewfkgIeqGzf1mnffbXotRAfQfbeQ+Ieo+Rfffu3Efzsj4qjU-HGzREfs-w7fR584-ge7fQ+HetRk-eLCXrbpvnH8-jGffGWA-i+E-7eXpK-uR4e3FA-4-g+2-nuK+JPfaXfA6vf+3G+tPnHiiZma+juOhK-F1K+QbwtIYrkZ-5OIAIb4o2T3D5fa-ka0GI-faLPhYUAbaY-2JYigVY3M+e96+MK2rzoUCYx7aUYz-Ju9+juCkW+++y+eugVKmeMBMMqB0CsANyC8N-hAA17f47iXLOZPf02QekKYdMPZi-wgHv8xePeIsj-1L6KwXoeMBAS2Dpg0wsYqQUAcQNN6UgfmlfKTkPwO6f9XeanFMB7xFhKEb+CsMfmJyr4xdI6TfIGl9yoE7NK+7fOgZsi87+kmAXfSgflyEGiD-+S-BgaP3Fzqc2KTtNgdKw4FvhveGne-op2n7V8N+J3IGgoKQL4RV+U4Eflv0-wRh2S3DWfq7wP7-gBBMgyPt81P5QCA6F-LUFfzmQHJ3u8PR-tcgSjOC5edgwwRjRCGyDg2Ozf-kCg+4ADxBhpLSPDySGVNKYCYSIZgKBRFlMhx-OQY8iHB+DJB-bIgVcRIHExToXUaQdQLcH+IMBVIWgdEOTqWDlBzA1QcLGdoaD-SWg8fjoL4Gpcj+fQE-nUI8HJ0RBTQqkGrkz7FCuB3fXIUMNqFsB6hEAeQXQJaEZ8VBOkalOoPBbdDkhvQsIboKn7dUwhCvWwiCG0GmCV+13CwX0IDZWC7uSACfmJx9BeFk+UwhWG6VwhERXUxHBRj8L0A6cIhgw3oMMKWGjCqQsQuZO8I9J+CPS8QgAcgKuJfErmIwNplgMJjzDQRiw5YeMJk4B0PhEgvGG5TvCkDKhFAhmIYiSDsBeCQXdmDnnIEqAEAI3EWCwL9Bvgc8L0HPCyO76ggmR--bkRdxYFkknEDoFyDCkaKnUrEdeQUT9Tz701mSf+BxNKIdCoiu8zjAPIPXoHXJNRQ9TUZHhBSI9L8ISa-KlQ6C6i+grqRgnc15S1Zy85oxfFqN6DNN+gdzfrtiGYb14q4jgV1MLQ9QdBPRvKH0XoD9G6cr0U4BSEgAkBUsfqPUJkSyNoSKxYwkY6MdQSZZ0FExEYx4FGJVb9BesmY5MdmOjGMFmCqVAscUBTEj0x6WrfOtSLYC8E00jBOkX8D5HaAb8w9JMRWKLEqtICyiBOhmCq41cYwNCMAOwQMDhjCxOY4glAR0QDiwA63TbvvHYJ2AtWVIxWPWO4BppfaWKXELwRvguhzYOeCEBXl65a8ZBSXdoZ7yG5njWx3ARdFl1vE8ATRSIHQAlDmgiQswj448ZlzPEsiOeGIR8TTDOQkNvYR4voJqgH65cEuQoy8eNwfE54r8L425IjyV7nR4JSIX0ZcH9FncbxOeTCTADubGiqSpovWlBMiJ4S9A1ooGk9maa9joCC3FyJxEe4lcdAr3f8eePsRP9IY+gngcV0KgLgCkNEvQNOO0Q0h-R50JiaZVoiyh1o5Aq4tmxl4cNQIkFKoKlH4hyS2wCkrHt2jWCcQiywEkyneC-HgSLeSiDEM-hUSsTfx7FMiTlyey8iwJ-QUySMHMl0TLJ14vLiyLG6a9OelbDTh5CInWESJxUe8dZIvE6RvUjJW7jv3u6zInBEtdLlZN8nsSeR7VbiScPX7pcBJ2lXIB6SEkiSQEYkr4fqEkkJCUoa4GSZig0nOgtJjcIZEpL0kekfkak-MO3jp4KNGpQKJ8NclKk5Tep7EHfEyOPHOTXJwCSyXjDYmgFUq+kv5IZIgjfBXAQAA) „ÅßÂãï‰ΩúÁ¢∫Ë™ç„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

:::message alert
„ÄêÊ≥®ÊÑè„Äë
‰ªäÂõûÂÆüË£Ö„Åô„ÇãÊ≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„ÅØÂÆüÁî®„ÇíÊÉ≥ÂÆö„Åó„Åü„ÇÇ„ÅÆ„Åß„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ„Åæ„Åü„ÄÅÁ≠ÜËÄÖ„ÅØ TypeScript „Å´Á≤æÈÄö„Åó„Å¶„ÅÑ„Çã„Çè„Åë„Åß„ÅØ„Å™„ÅÑ„Åü„ÇÅ„ÄÅË®ò‰∫ã„ÅÆÂÜÖÂÆπ„Å´„ÅØË™§„Çä„Åå„ÅÇ„ÇãÂ†¥Âêà„Åå„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ„ÅÇ„Çâ„Åã„Åò„ÇÅ„Åî‰∫ÜÊâø„Åè„Å†„Åï„ÅÑ„ÄÇ
:::

:::message
„Äê„Åä„Åì„Å®„Çè„Çä„Äë
Áâπ„Å´ÂÆüË£ÖÈÉ®ÂàÜ„Å´„Å§„ÅÑ„Å¶„ÄÅË™¨Êòé„ÅåÂÜóÈï∑„Åß„ÅÇ„Å£„Åü„ÇäÁúÅÁï•„Åï„Çå„Åô„Åé„Å¶„ÅÑ„ÇãÈÉ®ÂàÜ„ÅåÊï£Ë¶ã„Åï„Çå„Çã„Åã„Å®ÊÄù„ÅÑ„Åæ„Åô„Åå„ÄÅËëóËÄÖ„ÅÆ„ÇÑ„ÇãÊ∞óÊ¨°Á¨¨„ÅßÊîπÂñÑ„Åï„Çå„Çã„Åæ„Åß„ÅØÈÅ©ÂÆú LLM „ÅÆÂäõ„ÇíÂÄü„Çä„Å¶Ë™≠„ÅøÈÄ≤„ÇÅ„Å¶„ÅÑ„Åü„Å†„Åë„Çã„Å®Âπ∏„ÅÑ„Åß„Åô„ÄÇ
:::

# ÂâçÊèêÁü•Ë≠ò

Êú¨Ë®ò‰∫ã„ÅØ‰ª•‰∏ã„ÅÆÂâçÊèêÁü•Ë≠ò„ÇíÂøÖË¶Å„Å®„Åó„Åæ„Åô„ÄÇ

- TypeScript „ÅÆÂûã, ÂûãÊºîÁÆó
  - [Âü∫Êú¨ÁöÑ„Å™Âûã](https://typescriptbook.jp/reference/values-types-variables)
  - Generics
  - Conditional Type
  - infer
  - Mapped Types
  - Template Literal Types
- ÂÜçÂ∏∞„Å∏„ÅÆÊÖ£„Çå

# Ê≠£Ë¶èË°®Áèæ„Å®Ë®ÄË™ûÂá¶ÁêÜÁ≥ª

„Åì„Åì„Åß„ÅØ„ÄÅÊ≠£Ë¶èË°®Áèæ„ÅÆÊ¶ÇË¶Å„Å®Ë®ÄË™ûÂá¶ÁêÜÁ≥ª„ÅÆ„Åó„Åè„Åø„Å´„Å§„ÅÑ„Å¶Á¥π‰ªã„Åó„Åæ„Åô„ÄÇ

## Ê≠£Ë¶èË°®Áèæ„Åß„Åß„Åç„Çã„Åì„Å®

[Ê≠£Ë¶èË°®Áèæ](https://ja.wikipedia.org/wiki/%E6%AD%A3%E8%A6%8F%E8%A1%A8%E7%8F%BE) (regular expression) „ÅØ„ÄÅË§áÊï∞„Éë„Çø„Éº„É≥„ÅÆÊñáÂ≠óÂàó„Çí‰∏Ä„Å§„ÅÆÊñáÂ≠óÂàó„ÅßË°®Áèæ„Åô„Çã„Åü„ÇÅ„ÅÆÊû†ÁµÑ„Åø„Åß„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅÊ≠£Ë¶èË°®Áèæ `pi|yo` „ÅØ„ÄÅÊñáÂ≠óÂàó `pi` „Åæ„Åü„ÅØ `yo` „ÇíË°®Áèæ„Åó„Åæ„Åô„ÄÇÁπ∞„ÇäËøî„ÅóÂõûÊï∞„ÇíÊåáÂÆö„Åß„Åç„Çã [Êï∞ÈáèÂ≠ê](https://developer.mozilla.org/ja/docs/Web/JavaScript/Guide/Regular_expressions/Quantifiers) (quantifier) „ÇíÁî®„ÅÑ„Çã„Åì„Å®„Åß„ÄÅÁÑ°Èôê„Éë„Çø„Éº„É≥„ÅÆÊñáÂ≠óÂàó„ÇíË°®Áèæ„Åô„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ

```
// `pi` „Åæ„Åü„ÅØ `yo` „ÅÆ1Âõû‰ª•‰∏ä„ÅÆÁπ∞„ÇäËøî„Åó
(pi|yo)+  ->  pi, yo, piyo, yopi, pipiyo, piyopiyo, ...
```

‰ªäÂõû„ÅØ‰ª•‰∏ã„ÅÆË¶ÅÁ¥†„ÇíÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅ`expr` „Å™„Å©„ÅØ„ÅÇ„Çã‰∏Ä„Å§„ÅÆÊ≠£Ë¶èË°®Áèæ„Å®„Åó„Åæ„Åô„ÄÇ

| Ë¶ÅÁ¥†                                                                                                                                        | Ê≠£Ë¶èË°®Áèæ‰æã     | Ë™¨Êòé                                          |
| ------------------------------------------------------------------------------------------------------------------------------------------- | -------------- | --------------------------------------------- |
| [Ë´ñÁêÜÂíå](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Disjunction) `\|`                               | `expr1\|expr2` | Â∑¶Âè≥„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ„Å©„Å°„Çâ„Åã„Å´‰∏ÄËá¥                |
| ÈÄ£Êé•                                                                                                                                        | `expr1expr2`   | 2 „Å§„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆÈÄ£Á∂ö„Å´‰∏ÄËá¥                    |
| [Êï∞ÈáèÂ≠ê](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Quantifier) `*`                                 | `expr*`        | Áõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 0 Âõû‰ª•‰∏ä„ÅÆÁπ∞„ÇäËøî„Åó           |
| [Êï∞ÈáèÂ≠ê](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Quantifier) `+`                                 | `expr+`        | Áõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 1 Âõû‰ª•‰∏ä„ÅÆÁπ∞„ÇäËøî„Åó           |
| [Êï∞ÈáèÂ≠ê](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Quantifier) `?`                                 | `expr?`        | Áõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 0 „Åæ„Åü„ÅØ 1 Âõû„ÅÆÂá∫Áèæ          |
| [„Ç∞„É´„Éº„ÉóÂåñ](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Capturing_group) `()`                       | `(expr)`       | ÊºîÁÆóÂÑ™ÂÖàÂ∫¶„ÅÆÂà∂Âæ°„ÇíË°å„ÅÜ („Ç≠„É£„Éó„ÉÅ„É£„ÅØË°å„Çè„Å™„ÅÑ) |
| [„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Wildcard) `.`                           | `.`            | ÊîπË°åÊñáÂ≠ó„ÇíÈô§„Åè„Åô„Åπ„Å¶„ÅÆÊñáÂ≠ó„Å´‰∏ÄËá¥              |
| [„É™„ÉÜ„É©„É´ÊñáÂ≠ó](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Literal_character) `a`                    | `a`,`b`        | ÊñáÂ≠ó„Åù„ÅÆ„ÇÇ„ÅÆ„ÇíË°®„Åô                            |
| [„Ç®„Çπ„Ç±„Éº„Éó](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Character_escape) `\`                       | `\?`           | Áõ¥Âæå„ÅÆÊñáÂ≠ó„Çí„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Å®„Åó„Å¶Ëß£Èáà„Åï„Åõ„Çã      |
| [ÂÖ•ÂäõÈñãÂßãÂ¢ÉÁïå„Ç¢„Çµ„Éº„Ç∑„Éß„É≥](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Input_boundary_assertion) `^` | `^expr`        | ÂÖ•Âäõ„ÅÆÂÖàÈ†≠„ÇíË°®„Åô                              |
| [ÂÖ•ÂäõÊú´Â∞æÂ¢ÉÁïå„Ç¢„Çµ„Éº„Ç∑„Éß„É≥](https://developer.mozilla.org/ja/docs/Web/JavaScript/Reference/Regular_expressions/Input_boundary_assertion) `$` | `expr$`        | ÂÖ•Âäõ„ÅÆÊú´Â∞æ„ÇíË°®„Åô                              |

‚Äª(„Ç≠„É£„Éó„ÉÅ„É£)„Ç∞„É´„Éº„Éó„ÇÑ„Ç®„Çπ„Ç±„Éº„Éó„Å™„Å©„ÄÅ‰∏ÄËà¨ÁöÑ„Å™Ê≠£Ë¶èË°®Áèæ„Å®‰ªïÊßò„Åå‰∏ÄÈÉ®Áï∞„Å™„ÇãË¶ÅÁ¥†„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

## Ë®ÄË™û„ÅÆ„Å§„Åè„Çä„Åã„Åü

Ê≠£Ë¶èË°®Áèæ„ÇÑ„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Å™„Å©„ÅÆ„Ç≥„É≥„Éî„É•„Éº„Çø„ÅåËß£Èáà„Åß„Åç„ÇãÂΩ¢ÂºèË®ÄË™û„ÅØ„ÄÅ„Ç∑„É≥„Çø„ÉÉ„ÇØ„Çπ (Áµ±Ë™ûË´ñ, ÊßãÊñáË´ñ, syntax) „Å®„Çª„Éû„É≥„ÉÜ„Ç£„ÇØ„Çπ (ÊÑèÂë≥Ë´ñ, semantics) „Åã„ÇâÊàê„ÇäÁ´ã„Å°„Åæ„Åô„ÄÇÈÄÜ„Å´Ë®Ä„ÅÜ„Å®„ÄÅ„Åì„Çå„Çâ„Çí„Å°„ÇÉ„Çì„Å®ÂÆöÁæ©„Åô„Çã„Å®„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Çí„Å§„Åè„Å£„Åü„Åì„Å®„Å´„Å™„Çä„Åæ„Åô„ÄÇ„Ç∑„É≥„Çø„ÉÉ„ÇØ„Çπ„ÅØ„Åñ„Å£„Åè„Çä„Å©„ÅÆ„Çà„ÅÜ„Å™ÊñáÂ≠óÂàó„Åå„Éó„É≠„Ç∞„É©„É†„ÇíË°®Áèæ„Åô„Çã„ÅãÔºü„Å®„ÅÑ„ÅÜ„ÄåÊñáÊ≥ï„Äç„ÅÆÂÆöÁæ©„Åß„ÄÅ„Çª„Éû„É≥„ÉÜ„Ç£„ÇØ„Çπ„ÅØ„Åñ„Å£„Åè„Çä„Å©„Çì„Å™Âá¶ÁêÜ„ÅåÂÆüË°å„Åï„Çå„Çã„ÅãÔºü„Å®„ÅÑ„ÅÜ„ÄåÊÑèÂë≥„Äç„ÅÆÂÆöÁæ©„Åß„Åô„ÄÇ

## Ë®ÄË™ûÂá¶ÁêÜÁ≥ª

„ÅÇ„ÇãÊñáÂ≠óÂàó„Åå‰∏é„Åà„Çâ„Çå„Åü„Å®„Åç„Å´„ÄÅ„Åù„Çå„ÇíÁâπÂÆöË®ÄË™û„ÅÆ„Ç∑„É≥„Çø„ÉÉ„ÇØ„Çπ„Éª„Çª„Éû„É≥„ÉÜ„Ç£„ÇØ„Çπ„Å´Âü∫„Å•„ÅÑ„Å¶Ëß£Èáà„Åó„ÄÅ„Å™„Çì„Çâ„Åã„ÅÆÂá¶ÁêÜ„ÇíË°å„ÅÜ„ÇΩ„Éï„Éà„Ç¶„Çß„Ç¢„ÅÆ„Åì„Å®„ÇíË®ÄË™ûÂá¶ÁêÜÁ≥ª„Å®„ÅÑ„ÅÑ„ÄÅÁâπ„Å´„Çª„Éû„É≥„ÉÜ„Ç£„ÇØ„ÇπÈÉ®ÂàÜ„ÅÆÂá¶ÁêÜÊñπÂºè„Å´„Çà„Å£„Å¶„ÄÅ„Ç§„É≥„Çø„Éó„É™„Çø„Å®„Ç≥„É≥„Éë„Ç§„É©„Å´Â§ßÂà•„Åï„Çå„Åæ„Åô„ÄÇ„Ç§„É≥„Çø„Éó„É™„Çø„Åß„ÇÇ„Ç≥„É≥„Éë„Ç§„É©„Åß„ÇÇ„ÄÅ‰∏é„Åà„Çâ„Çå„ÅüÊñáÂ≠óÂàó„Çí„Ç∑„É≥„Çø„ÉÉ„ÇØ„Çπ„Å´Âü∫„Å•„ÅÑ„Å¶Ëß£Èáà„Åô„ÇãÂ≠óÂè•Ëß£Êûê„ÉªÊßãÊñáËß£Êûê„ÅØÂÖ±ÈÄö„ÅÆÊ©üËÉΩ„Åß„ÅÇ„Çä„ÄÅËß£Èáà„Åó„ÅüÁµêÊûú„ÅØ [ÊäΩË±°ÊßãÊñáÊú®](https://ja.wikipedia.org/wiki/%E6%8A%BD%E8%B1%A1%E6%A7%8B%E6%96%87%E6%9C%A8) (abstract syntax tree, AST) „Å®„ÅÑ„ÅÜ„Éá„Éº„ÇøÊßãÈÄ†„ÅßË°®Áèæ„Åï„Çå„Åæ„Åô„ÄÇ

Ê≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„Å´„Åä„Åë„ÇãÊßãÊñáËß£Êûê‰ª•Èôç„ÅÆÂÆüË£ÖÊñπÊ≥ï„Å®„Åó„Å¶„ÅØ„ÄÅ‰∏ª„Å´ DFA Âûã„Å® VM Âûã„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇDFA Âûã„ÅØ„ÄÅÊäΩË±°ÊßãÊñáÊú®„Åã„Çâ [DFA](https://ja.wikipedia.org/wiki/%E6%B1%BA%E5%AE%9A%E6%80%A7%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (Ê±∫ÂÆöÊÄßÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥) „ÇíÊßãÊàê„Åó„Åæ„Åô„ÄÇVM Âûã„ÅØ„ÄÅÊäΩË±°ÊßãÊñáÊú®„Çí‰ªÆÊÉ≥„Éû„Ç∑„É≥Áî®„ÅÆÂëΩ‰ª§Âàó„Å´„Ç≥„É≥„Éë„Ç§„É´„Åó„Å¶ÂÆüË°å„Åó„Åæ„Åô„ÄÇ‰ªäÂõû„ÅØ„ÄÅDFA Âûã„ÅÆ„ÅÜ„Å°„ÄÅÁâπ„Å´ [NFA](https://ja.wikipedia.org/wiki/%E9%9D%9E%E6%B1%BA%E5%AE%9A%E6%80%A7%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (ÈùûÊ±∫ÂÆöÊÄßÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥) „Éê„Éº„Ç∏„Éß„É≥„ÅÆ„ÇÇ„ÅÆ„ÇíÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ(NFA „ÅÆÊñπ„Åå„Åã„Çì„Åü„Çì)

‰ªäÂõûÂÆüË£Ö„Åô„ÇãÂá¶ÁêÜÁ≥ª„ÅßË°å„ÅÜ‰ª•‰∏ã„ÅÆÂá¶ÁêÜ„Éï„É≠„Éº„Å´„Å§„ÅÑ„Å¶„ÄÅÊ¨°ÁØÄ‰ª•Èôç„ÅßË©≥„Åó„ÅèË™¨Êòé„Åó„Åæ„Åô„ÄÇ

- Â≠óÂè•Ëß£Êûê: Ê≠£Ë¶èË°®Áèæ„ÇíË°®„ÅôÊñáÂ≠óÂàó ‚Üí „Éà„Éº„ÇØ„É≥Âàó
- ÊßãÊñáËß£Êûê: „Éà„Éº„ÇØ„É≥Âàó ‚Üí ÊäΩË±°ÊßãÊñáÊú®
- NFA ÊßãÁØâ: ÊäΩË±°ÊßãÊñáÊú® ‚Üí NFA
- NFA ÂÆüË°å: (NFA, ÂØæË±°ÊñáÂ≠óÂàó) ‚Üí ÂèóÁêÜÁµêÊûú

## Â≠óÂè•Ëß£Êûê

[Â≠óÂè•Ëß£Êûê](https://ja.wikipedia.org/wiki/%E5%AD%97%E5%8F%A5%E8%A7%A3%E6%9E%90) (lexical analysis) „Å®„ÅØ„ÄÅ‰∏é„Åà„Çâ„Çå„ÅüÊñáÂ≠óÂàó„Çí„ÄÅËß£ÈáàÂØæË±°„ÅÆË®ÄË™û„Å´„Åä„ÅÑ„Å¶ÊÑèÂë≥„ÅÆ„ÅÇ„ÇãÊúÄÂ∞èÂçò‰Ωç („Éà„Éº„ÇØ„É≥) „Å´ÂàÜÂâ≤„Åô„ÇãÂá¶ÁêÜ„Åß„Åô„ÄÇÊ≠£Ë¶èË°®Áèæ„Å´„Åä„Åë„Çã„Éà„Éº„ÇØ„É≥„ÅØ„ÄÅÂÖà„Å´Êåô„Åí„ÅüÊºîÁÆóÂ≠ê„ÄÅÊï∞ÈáèÂ≠ê„ÄÅÊñáÂ≠ó„É™„ÉÜ„É©„É´„Å™„Å©„Åå„Åù„Çå„Å´„ÅÇ„Åü„Çä„Åæ„Åô„ÄÇ‰ªäÂõû„ÅÆÂÆüË£ÖÁØÑÂõ≤„Åß„ÅØ„ÄÅ„Ç®„Çπ„Ç±„Éº„Éó‰ª•Â§ñ„ÅØÂü∫Êú¨ÁöÑ„Å´ÂÖ•ÂäõÊñáÂ≠ó 1 ÊñáÂ≠ó„Å®„Éà„Éº„ÇØ„É≥„Åå‰∏ÄÂØæ‰∏ÄÂØæÂøú„Åó„Åæ„Åô„Åå„ÄÅ‰∏ÄËà¨ÁöÑ„Å™„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞Ë®ÄË™û„Åß„Çà„Åè„ÅÇ„Çã‰∫àÁ¥ÑË™û `if`, `else`, `for`, `class` „Å™„Å©„ÅÆË§áÊï∞ÊñáÂ≠ó„Åã„Çâ„Å™„Çã„Ç≠„Éº„ÉØ„Éº„Éâ„ÇÇ‰∏Ä„Å§„ÅÆ„Éà„Éº„ÇØ„É≥„Å®„Åó„Å¶Êâ±„Çè„Çå„Åæ„Åô„ÄÇ

```: „Éà„Éº„ÇØ„É≥Âåñ„ÅÆ‰æã
(pi|yo)+  ->  [LPAREN, CHAR(p), CHAR(i), UNION, CHAR(y), CHAR(o), RPAREN, PLUS]
```

:::message
ÊñáÂ≠óÂàó„Åã„Çâ„Éà„Éº„ÇØ„É≥Âàó„Å∏„ÅÆÂ§âÊèõ„ÅØ„ÄÅ[ÂÆüË£ÖÁ∑®: Lexer](#lexer) „ÅßÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ
:::

## ÊßãÊñáËß£Êûê

[ÊßãÊñáËß£Êûê](https://ja.wikipedia.org/wiki/%E6%A7%8B%E6%96%87%E8%A7%A3%E6%9E%90) (parsing, syntactic analysis) „Å®„ÅØ„ÄÅÂ≠óÂè•Ëß£Êûê„ÅßÂá∫Âäõ„Åï„Çå„Åü„Éà„Éº„ÇØ„É≥Âàó„Åã„ÇâÊäΩË±°ÊßãÊñáÊú®„ÇíÊßãÊàê„Åô„ÇãÂá¶ÁêÜ„Åß„Åô„ÄÇÊäΩË±°ÊßãÊñáÊú®„ÅÆ "Èõ∞Âõ≤Ê∞ó" „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÊÑü„Åò„Åß„Åô„ÄÇ

```ts
if (x > y) {
  max = x;
} else {
  max = y;
}
```

```mermaid
graph TB
    A(ifÊñá) --> |true/false „ÇíËøî„ÅôÂºè| B(ÊØîËºÉÂºè)
    A --> |true „ÅÆÂ†¥Âêà„ÅÆÂºè| C(‰ª£ÂÖ•Êñá)
    A --> |false „ÅÆÂ†¥Âêà„ÅÆÂºè| D(‰ª£ÂÖ•Êñá)
    B --> |Â∑¶„ÅÆÂºè| E(Â§âÊï∞)
    E --> F(x)
    B --> |Âè≥„ÅÆÂºè| G(Â§âÊï∞)
    G --> H(y)
    C --> |Â∑¶Ëæ∫| I(Â§âÊï∞)
    I --> J(max)
    C --> |Âè≥Ëæ∫| K(Â§âÊï∞)
    K --> L(x)
    D --> |Â∑¶Ëæ∫| M(Â§âÊï∞)
    M --> N(max)
    D --> |Âè≥Ëæ∫| O(Â§âÊï∞)
    O --> P(y)
```

„Éà„Éº„ÇØ„É≥Âàó„Åã„Çâ„Åì„ÅÆ„Çà„ÅÜ„Å™ÊßãÊñáÊú®„ÇíÊßãÊàê„Åô„Çã„Å´„ÅØ„ÄÅÊñáÊ≥ïË¶èÂâá„ÄÅ„Å§„Åæ„Çä„Å©„ÅÆ„Çà„ÅÜ„Å™„Éà„Éº„ÇØ„É≥Âàó„ÅåÊ≠£„Åó„ÅÑË®ÄË™û„ÅãÔºü„ÇíÂÆöÁæ©„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇÊñáÊ≥ï„ÅÆÂÆöÁæ©ÊñπÊ≥ï„ÅÆ‰∏Ä„Å§„Å®„Åó„Å¶„ÄÅ[BNF](https://ja.wikipedia.org/wiki/%E3%83%90%E3%83%83%E3%82%AB%E3%82%B9%E3%83%BB%E3%83%8A%E3%82%A6%E3%82%A2%E8%A8%98%E6%B3%95) („Éê„ÉÉ„Ç´„Çπ„Éª„Éä„Ç¶„Ç¢Ë®òÊ≥ï, Backus‚ÄìNaur form) „Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ‰ªäÂõûÂÆüË£Ö„Åô„ÇãÊ≠£Ë¶èË°®Áèæ„ÅÆ BNF „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÊÑü„Åò„Åß„Åô„ÄÇ

```xml
<regexp> ::= <union-expr>
<union-expr> ::= <concat-expr> UNION <union-expr> | <concat-expr>
<concat-expr> ::= <plus-expr> <concat-expr> | <plus-expr>
<plus-expr> ::= <factor-expr> PLUS | <star-expr>
<star-expr> ::= <factor-expr> STAR | <option-expr>
<option-expr> ::= <factor-expr> OPTION | <factor-expr>
<factor-expr> ::= LPAREN <union-expr> RPAREN | DOT | CHAR(x)
```

`::=` „ÅßÂÆöÁæ©„Åï„Çå„Çã„ÅÆ„Åå‰∏Ä„Å§„ÅÆË¶èÂâá„Åß„ÄÅÂ∑¶Ëæ∫„ÅÆË®òÂè∑„Åã„ÇâÂè≥Ëæ∫„ÅÆË®òÂè∑Âàó„ÇíÂ∞é„Åè„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇÁ¥õ„Çâ„Çè„Åó„ÅÑ„Åß„Åô„Åå„ÄÅ„Åì„Åì„Åß„ÅÆ `|` „ÅØÊ≠£Ë¶èË°®Áèæ„Åß„ÅØ„Å™„Åè BNF „ÅÆË®òÊ≥ï„Åß„ÄÅ`|` „ÅßÂàÜÂâ≤„Åï„Çå„Åü„ÅÑ„Åö„Çå„Åã„ÅÆË®òÂè∑Âàó„ÇíÂ∞é„Åè„Åì„Å®„Åå„Åß„Åç„Çã„ÄÅ„Å®„ÅÑ„ÅÜÊÑèÂë≥„Å´„Å™„Çä„Åæ„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅË¶èÂâá `<union-expr>` „Åã„ÇâÁîüÊàê„Åï„Çå„ÇãË®òÂè∑Âàó„ÅØ‰ª•‰∏ã„ÅÆ„ÅÑ„Åö„Çå„Åã„Åß„Åô„ÄÇ

- `<concat-expr>` „Åã„ÇâÁîüÊàê„Åï„Çå„ÇãË®òÂè∑Âàó + `UNION` + `<union-expr>` „Åã„ÇâÁîüÊàê„Åï„Çå„ÇãË®òÂè∑Âàó
- `<concat-expr>` „Åã„ÇâÁîüÊàê„Åï„Çå„ÇãË®òÂè∑Âàó

Ë¶èÂâá `<regexp>` „Åã„ÇâÂßã„ÇÅ„Å¶„ÄÅË¶èÂâá (ÈùûÁµÇÁ´ØË®òÂè∑) „Åå„Å™„Åè„Å™„Çã„Åæ„ÅßÈÄ£Á∂öÁöÑ„Å´Ë¶èÂâá„ÇíÈÅ©Áî®„Åô„Çã„Åì„Å®„ÅßÁîüÊàê„Åï„Çå„Çã„Éà„Éº„ÇØ„É≥Âàó (ÁµÇÁ´ØË®òÂè∑Âàó) „ÅØ„ÄÅ„Åô„Åπ„Å¶ (‰ªäÂõûÂÆöÁæ©„Åô„Çã) Ê≠£Ë¶èË°®Áèæ„Åß„Åô„ÄÇ

Ë©¶„Åó„Å´„ÄÅÊñáÂ≠óÂàó `(ab|c)*` „Å´ÂØæÂøú„Åô„Çã‰ª•‰∏ã„ÅÆ„Éà„Éº„ÇØ„É≥Âàó„Çí `<regexp>` „Åã„ÇâÂ∞é„ÅÑ„Å¶„Åø„Åæ„Åó„Çá„ÅÜÔºÅ

```
LPAREN CHAR(a) CHAR(b) UNION CHAR(c) RPAREN STAR
```

::: details (ab|c)\* „ÇíË°®„Åô„Éà„Éº„ÇØ„É≥Âàó„ÅÆÂ∞éÂá∫

1. `<regexp>`: „Éà„ÉÉ„Éó„É¨„Éô„É´„ÅÆË®òÂè∑
2. `<union-expr>`: Ë¶èÂâá `<regexp>` „ÇíÈÅ©Áî®„Åó„Å¶ `<union-expr>` „Å´Â§âÊèõ
3. `<concat-expr>`: Ë¶èÂâá `<union-expr>` „ÅÆÂè≥ÂÅ¥„ÇíÈÅ©Áî®
4. `<plus-expr>`: Ë¶èÂâá `<concat-expr>` „ÅÆÂè≥ÂÅ¥
5. `<star-expr>`: Ë¶èÂâá `<plus-expr>` „ÅÆÂè≥
6. `<factor-expr> STAR`: `<star-expr>` „ÅÆÂ∑¶
7. `LPAREN <union-expr> RPAREN STAR`: `<factor-expr>` „ÅÆ 1 Áï™ÁõÆ
8. `LPAREN <concat-expr> UNION <union-expr> RPAREN STAR`: `<union-expr>` „ÅÆÂ∑¶
9. `LPAREN <plus-expr> <concat-expr> UNION <union-expr> RPAREN STAR`: `<concat-expr>` „ÅÆÂ∑¶
10. `LPAREN <star-expr> <concat-expr> UNION <union-expr> RPAREN STAR`: `<plus-expr>` „ÅÆÂè≥
11. `LPAREN <option-expr> <concat-expr> UNION <union-expr> RPAREN STAR`: `<star-expr>` „ÅÆÂè≥
12. `LPAREN <factor-expr> <concat-expr> UNION <union-expr> RPAREN STAR`: `<option-expr>` „ÅÆÂè≥
13. `LPAREN CHAR(a) <concat-expr> UNION <union-expr> RPAREN STAR`: `<factor-expr>` „ÅÆ 3 Áï™ÁõÆ
14. `LPAREN CHAR(a) <plus-expr> UNION <union-expr> RPAREN STAR`: `<concat-expr>` „ÅÆÂè≥
15. `LPAREN CHAR(a) <star-expr> UNION <union-expr> RPAREN STAR`: `<plus-expr>` „ÅÆÂè≥
16. `LPAREN CHAR(a) <option-expr> UNION <union-expr> RPAREN STAR`: `<star-expr>` „ÅÆÂè≥
17. `LPAREN CHAR(a) <factor-expr> UNION <union-expr> RPAREN STAR`: `<option-expr>` „ÅÆÂè≥
18. `LPAREN CHAR(a) CHAR(b) UNION <union-expr> RPAREN STAR`: `<factor-expr>` „ÅÆ 3 Áï™ÁõÆ
19. (ÁúÅÁï•) `<union-expr>` -> `<factor-expr>` „Åæ„Åß„Åö„Å£„Å®Âè≥
20. `LPAREN CHAR(a) CHAR(b) UNION CHAR(c) RPAREN STAR`: `<factor-expr>` „ÅÆ 3 Áï™ÁõÆ
    „Åß„Åç„Åæ„Åó„ÅüÔºÅ

:::

„Åì„ÅÆ„Éà„Éº„ÇØ„É≥Âàó„Åã„ÇâÁîüÊàê„Åï„Çå„Çã AST „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„Å™„Çä„Åæ„Åô„ÄÇ

```mermaid
graph TB
    A(root) --> |child| B(star)
    B --> |child| C(concat)
    C --> |leftChild| D(concat)
    C --> |rightChild| E("char(c)")
    D --> |leftChild| F("char(a)")
    D --> |rightChild| G("char(b)")
```

:::message
ÊñáÊ≥ïË¶èÂâá„Å´Âæì„Å£„Å¶„Éà„Éº„ÇØ„É≥Âàó„Åã„ÇâÊäΩË±°ÊßãÊñáÊú®„ÇíÁîüÊàê„Åô„Çã„Ç¢„É´„Ç¥„É™„Ç∫„É†„ÅØ [ÂÆüË£ÖÁ∑®: Parser](#parser) „ÅßÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ
:::

## ÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥

[„Ç™„Éº„Éà„Éû„Éà„É≥](https://ja.wikipedia.org/wiki/%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (automaton) „Å®„ÅØ„ÄÅ„Åñ„Å£„Åè„Çä„ÄåÁä∂ÊÖã„Äç„Å®„ÄåÈÅ∑ÁßªË¶èÂâá„Äç„Çí„ÇÇ„Å£„ÅüÊäΩË±°ÁöÑ„Å™Ë®àÁÆó„É¢„Éá„É´„Åß„Åô„ÄÇÁâπ„Å´„ÄÅÁä∂ÊÖãÊï∞„ÅåÊúâÈôê„ÅÆ„ÇÇ„ÅÆ„Çí [ÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥](https://ja.wikipedia.org/wiki/%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (finite automaton) „Å®„ÅÑ„ÅÑ„Åæ„Åô„ÄÇÊú¨Êù•„ÅØÊï∞Â≠¶ÁöÑË®òÂè∑„ÇíÂ∞éÂÖ•„Åó„Å¶ÂΩ¢ÂºèÁöÑ„Å´ÂÆöÁæ©„Åó„Åü„Åª„ÅÜ„Åå„Çà„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅÂÖ∑‰Ωì‰æã„ÇíÁ§∫„Åó„Å¶„Åó„Åæ„Å£„ÅüÊñπ„ÅåÂàÜ„Åã„Çä„ÇÑ„Åô„ÅÑ„ÅÆ„Åß„ÄÅ„Åæ„Åö„ÅØ‰ª•‰∏ã„ÅÆ‰æã„Çí„Åø„Å¶„Åø„Åæ„Åó„Çá„ÅÜ„ÄÇ

```mermaid
stateDiagram
    direction LR
    q0: s0 (start)
    q1: s1
    q2: s2 (accept)
    q0 --> q1: a
    q0 --> q2: b
    q1 --> q2: a
    q1 --> q1: b
    q2 --> q1: a
    q2 --> q2: b

    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
```

3 „Å§„ÅÆÁä∂ÊÖã„Å®ÂêÑÁä∂ÊÖã„Åã„Çâ„ÅÆÈÅ∑Áßª (ÊñáÂ≠ó) „Åã„Çâ„Åß„Åç„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÁâπÂà•„Å™Áä∂ÊÖã„Å®„Åó„Å¶ÂàùÊúüÁä∂ÊÖã (start) „Å®ÂèóÁêÜÁä∂ÊÖã (accept) „Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ„ÅÇ„ÇãÊñáÂ≠óÂàó„Åå‰∏é„Åà„Çâ„Çå„Åü„Å®„Åç„ÄÅÂàùÊúüÁä∂ÊÖã„Åã„ÇâÂßã„ÇÅ„Å¶ÊñáÂ≠ó„Çí 1 ÊñáÂ≠ó„Åö„Å§Ë™≠„ÅøËæº„Åø„Å™„Åå„ÇâÁä∂ÊÖã„ÇíÈÅ∑Áßª„Åó„Å¶„ÅÑ„Åç„ÄÅ„Åô„Åπ„Å¶„ÅÆÊñáÂ≠ó„ÇíË™≠„ÅøËæº„Çì„Å†ÊôÇÁÇπ„ÅßÂèóÁêÜÁä∂ÊÖã„Å´„ÅÑ„Åü„Çâ„Åù„ÅÆÊñáÂ≠ó„ÅØÂèóÁêÜ„Åï„Çå„Åæ„Åô„ÄÇÂàùÊúüÁä∂ÊÖã„ÅØÂøÖ„Åö‰∏Ä„Å§„ÄÅÂèóÁêÜÁä∂ÊÖã„ÅØË§áÊï∞„ÅÇ„Å£„Å¶„ÇÇÊßã„ÅÑ„Åæ„Åõ„Çì„ÄÇ

„Åì„ÅÆÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅØ `a`, `b` „Åã„Çâ„Å™„ÇãÊñáÂ≠óÂàó„Åå‰∏é„Åà„Çâ„Çå„Åü„Å®„Åç„ÄÅ„Åù„Çå„Åå `a` „ÇíÂÅ∂Êï∞ÂÄãÂê´„ÇÄ„Åã„Å©„ÅÜ„Åã„ÇíÂà§ÂÆö„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ`abab` „Åå‰∏é„Åà„Çâ„Çå„Åü„Å®„Åç„ÅÆÂà§ÂÆöÂá¶ÁêÜ„ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ÊÑü„Åò„Åß„Åô„ÄÇ

1. ÂàùÊúüÁä∂ÊÖã `s0` „Åã„Çâ„Çπ„Çø„Éº„Éà
2. 1 ÊñáÂ≠óÁõÆ„Åå `a` „Å™„ÅÆ„Åß„ÄÅ`s0` „Åã„Çâ `a` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã `s1` „Å´ÁßªÂãï
3. 2 ÊñáÂ≠óÁõÆ„Åå `b` „Å™„ÅÆ„Åß„ÄÅ`s1` „Åã„Çâ `b` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã `s1` „Å´ÁßªÂãï
4. 3 ÊñáÂ≠óÁõÆ„Åå `a` „Å™„ÅÆ„Åß„ÄÅ`s1` „Åã„Çâ `a` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã `s2` „Å´ÁßªÂãï
5. 4 ÊñáÂ≠óÁõÆ„Åå `b` „Å™„ÅÆ„Åß„ÄÅ`s2` „Åã„Çâ `b` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã `s2` „Å´ÁßªÂãï
6. „Åô„Åπ„Å¶„ÅÆÂÖ•ÂäõÊñáÂ≠óÂàó„ÇíË™≠„Çì„Å†ÊôÇÁÇπ„ÅßÂèóÁêÜÁä∂ÊÖã `s2` „Å´„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åì„ÅÆÊñáÂ≠óÂàó„ÅØÂèóÁêÜ„Åï„Çå„Çã

Áä∂ÊÖã„ÇíËß£Èáà„Åô„Çã„Å®„ÄÅ`s1` „Åå„Äå„Åì„Çå„Åæ„Åß„Å´Ë™≠„Çì„Åß„ÅÑ„ÇãÊñáÂ≠óÂàó„ÅÆ„ÅÜ„Å° `a` „ÅÆÊï∞„ÅåÂ•áÊï∞ÂÄã„Äç„ÄÅ`s2` „Åå „Äå„Åì„Çå„Åæ„Åß„Å´Ë™≠„Çì„Åß„ÅÑ„ÇãÊñáÂ≠óÂàó„ÅÆ„ÅÜ„Å° `a` „ÅÆÊï∞„ÅåÂÅ∂Êï∞ÂÄã„Äç„Å®„Å™„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

„Åì„ÅÆ„Çà„ÅÜ„Å´„ÄÅÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅØ„Äå„ÅÇ„ÇãÊñáÂ≠ó„ÅÆÈõÜÂêà„ÇíÊ±∫„ÇÅ„Åü„Å®„Åç„Å´„Åù„ÅÆÊñáÂ≠ó„Åã„Çâ„Å™„ÇãÊñáÂ≠óÂàó„Åå„ÅÇ„ÇãÊÄßË≥™„ÇíÊ∫Ä„Åü„Åô„Åã„Å©„ÅÜ„ÅãÔºü„Äç„ÇíÂà§ÂÆö„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

## Ê≠£Ë¶èË°®Áèæ„Å®ÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅÆÂØæÂøú

Ê≠£Ë¶èË°®Áèæ„ÅØË§áÊï∞„Éë„Çø„Éº„É≥„ÅÆÊñáÂ≠óÂàó„Çí‰∏Ä„Å§„ÅÆÊñáÂ≠óÂàó„ÅßË°®Áèæ„Åó„Åü„ÇÇ„ÅÆ„Åß„ÄÅ„ÅÇ„ÇãÊñáÂ≠óÂàó„Åå„Åù„ÅÆ„Éë„Çø„Éº„É≥„Å´‰∏ÄËá¥„Åô„Çã„ÅãÂà§ÂÆö„Åó„Åü„Çä„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ‰ªªÊÑè„ÅÆÊ≠£Ë¶èË°®Áèæ„Å´„Å§„ÅÑ„Å¶„ÄÅ„Åù„Çå„Å´ÂØæÂøú„Åô„ÇãÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„Å´Â§âÊèõ„Åß„Åç„Çå„Å∞Âà§ÂÆöÂá¶ÁêÜ„ÅåÂÆüÁèæ„Åß„Åç„Åù„ÅÜ„Åß„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅÂêÑÊ≠£Ë¶èË°®Áèæ„Å´ÂØæÂøú„Åô„ÇãÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅÆÊßãÊàêÊñπÊ≥ï„Å´„Å§„ÅÑ„Å¶ËÄÉ„Åà„Åæ„Åô„ÄÇ

### „É™„ÉÜ„É©„É´ÊñáÂ≠ó

„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éà„Éº„ÇØ„É≥ `CHAR(a)` „Å´ÂØæÂøú„Åô„Çã„Ç™„Éº„Éà„Éû„Éà„É≥„ÅØ‰ª•‰∏ã„ÅÆÈÄö„Çä„Åß„Åô„ÄÇÂàùÊúüÁä∂ÊÖã„Åã„Çâ„ÅØ„Åò„ÇÅ„Å¶„ÄÅÊñáÂ≠ó `a` „ÇíÂèó„ÅëÂèñ„Å£„Åü„ÇâÂèóÁêÜÁä∂ÊÖã„Å´ÈÅ∑Áßª„Åô„Çã„ÄÇÁ∞°Âçò„Åß„Åô„Å≠ÔºÅ

```mermaid
stateDiagram
    direction LR
    q0: s0 (start)
    q1: s1 (accept)
    q0 --> q1: a
    style q0 stroke:#000,fill:#fff,stroke-width:1px;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
```

... „Å®„Åì„Çç„Åß„ÄÅ`a` ‰ª•Â§ñ„ÅÆÊñáÂ≠óÂàó„ÅåÊù•„Åü„Å®„Åç„ÅØ„Å©„ÅÜ„Å™„Çã„ÅÆ„Åß„Åó„Çá„ÅÜ„ÅãÔºü

ÈÅ∑ÁßªÂÖà„Åå 0 ÂÄã (Êú™ÂÆöÁæ©)„Åß„ÅÇ„Å£„Åü„Çä„ÄÅ2 ÂÄã‰ª•‰∏ä„Å†„Å£„Åü„Çä„Åô„Çã„ÇÇ„ÅÆ„Çí [ÈùûÊ±∫ÂÆöÊÄßÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥](https://ja.wikipedia.org/wiki/%E9%9D%9E%E6%B1%BA%E5%AE%9A%E6%80%A7%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (nondeterministic finite automaton, NFA) „Å®„ÅÑ„ÅÑ„Åæ„Åô„ÄÇ„Åù„Çå„Å´ÂØæ„Åó„Å¶„ÄÅÂÖ•Âäõ„Å´ÂØæ„Åó„Å¶ÈÅ∑ÁßªÂÖà„ÅåÂøÖ„Åö 1 „Å§„Å´ÂÆö„Åæ„Å£„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Çí [Ê±∫ÂÆöÊÄßÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥](https://ja.wikipedia.org/wiki/%E6%B1%BA%E5%AE%9A%E6%80%A7%E6%9C%89%E9%99%90%E3%82%AA%E3%83%BC%E3%83%88%E3%83%9E%E3%83%88%E3%83%B3) (deterministic finite automaton, DFA) „Å®„ÅÑ„ÅÑ„Åæ„Åô„ÄÇÂÖà„Åª„Å©„ÅÆ `a` „ÅåÂÅ∂Êï∞ÂÄã„ÅãÂà§ÂÆö„Åô„Çã„ÇÑ„Å§„ÅØ (ÂÖ•ÂäõÊñáÂ≠ó„Åå `a`, `b` „ÅÆ„Åø„Å®„ÅÑ„ÅÜÂâçÊèê„ÅÆ„ÇÇ„Å®„Åß) DFA „Åß„Åô„ÄÇ

### ÈÄ£Êé•

ÈÄ£Êé•„ÅØ„ÄÅ2 „Å§„ÅÆÊ≠£Ë¶èË°®Áèæ `expr1`, `expr2` „Åå„ÅÇ„Çã„Å®„Åç„ÄÅ„Åù„Çå„Çâ„Çí„Åù„ÅÆÈ†Ü„Åß‰∏¶„Åπ„Åü„ÇÇ„ÅÆ `expr1expr2` „Åß„Åó„Åü„ÄÇ„Åæ„ÅöÂâçÊèê„Å®„Åó„Å¶„ÄÅ`expr1`, `expr2` „Åù„Çå„Åû„Çå„Å´ÂØæÂøú„Åô„Çã NFA „Åå„Åß„Åç„Å¶„ÅÑ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅÂàùÊúüÁä∂ÊÖã„Å®ÂèóÁêÜÁä∂ÊÖã‰ª•Â§ñ„ÅØ„Å©„ÅÜ„Åß„ÇÇ„ÅÑ„ÅÑ„ÅÆ„ÅßÁúÅÁï•„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr1 {
        q0: s0 (start)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    state expr2 {
        r0: t0 (start)
        r1: t1 (accept)
    }
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
    style r0 stroke:#000,fill:#fff;
    style r1 stroke:#000,fill:#fff,stroke-width:3px;
```

„Åì„Çå„Çâ„ÇíÂà©Áî®„Åó„Å¶ÈÄ£Êé•„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„ÇãÊñπÊ≥ï„ÇíËÄÉ„Åà„Åæ„Åô„ÄÇ„Åù„ÅÆ„Åü„ÇÅ„Å´„ÄÅ„Åì„Åì„Åß „Ç§„Éó„Ç∑„É≠„É≥ÈÅ∑Áßª (Œµ-ÈÅ∑Áßª) „Å®„ÅÑ„ÅÜ„ÇÇ„ÅÆ„ÇíÂ∞éÂÖ•„Åó„Åæ„Åô„ÄÇÁ∞°Âçò„Å´„ÅÑ„ÅÜ„Å®„Äå„ÅÇ„ÇãÂÖ•Âäõ„Å´ÂØæ„Åó„Å¶„ÄÅ„ÅÑ„Åè„Çâ„Åß„ÇÇÈÅ∑Áßª„Åó„Å¶„ÇÇ„ÅÑ„ÅÑ„Åó„ÄÅÂÖ®„Åè„Åó„Å™„Åè„Å¶„ÇÇ„ÅÑ„ÅÑ„ÄçÈÅ∑ÁßªË¶èÂâá„Åß„Åô„ÄÇ‰æã„Åà„Å∞„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ NFA „ÇíËÄÉ„Åà„Åü„Å®„Åç„ÄÅ `s0` „Å´„ÅÑ„ÇãÁä∂ÊÖã„ÅßÂÖ•Âäõ `a` „ÇíÂèó„ÅëÂèñ„Å£„Åü„Å®„Åç„ÅØ„ÄÅ `Œµ` „ÇíÁµå„Å¶ `a` „ÅÆÈÅ∑Áßª„Åß `s2` „Å´ÁßªÂãï„Åó„Åü„ÅÇ„Å®„ÄÅÁä∂ÊÖã `s2` „Å´Áïô„Åæ„Çã„Åì„Å®„ÇÇ„ÄÅ `s3` „Å∏ÈÅ∑Áßª„Åô„Çã„Åì„Å®„ÇÇ„Åß„Åç„Åæ„Åô„ÄÇ„Çà„Å£„Å¶„ÄÅ NFA „ÅÆÂãï‰Ωú„Çí„Ç∑„Éü„É•„É¨„Éº„Éà„Åô„ÇãÈöõ„ÅØ„ÄÅÁèæÂú®„ÅÑ„ÇãË§áÊï∞Áä∂ÊÖã„ÇíÁÆ°ÁêÜ„Åó„Å™„Åå„Çâ‰∏¶ÂàóÂÆüË°å„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    q0: s0
    q1: s1
    q2: s2
    q3: s3
    q0 --> q1: Œµ
    q1 --> q2: a
    q2 --> q3: Œµ
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff;
    style q2 stroke:#000,fill:#fff;
    style q3 stroke:#000,fill:#fff;
```

„Åì„ÅÆ„Ç§„Éó„Ç∑„É≠„É≥ÈÅ∑Áßª„ÇíÁî®„ÅÑ„Çã„Å®„ÄÅÂÖàÁ®ã„ÅÆÈÄ£Êé•„Å´ÂØæÂøú„Åô„Çã NFA „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ÊßãÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr1 {
        direction LR
        q0: s0 (start)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    state expr2 {
        direction LR
        r0: t0 (start)
        r1: t1 (accept)
    }
    q1 --> r0: Œµ
    q2 --> r0: Œµ
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
    style r0 stroke:#000,fill:#fff;
    style r1 stroke:#000,fill:#fff,stroke-width:3px;
```

`expr1` „ÅÆ„Åô„Åπ„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„Å´„Å§„ÅÑ„Å¶„ÄÅŒµ-ÈÅ∑Áßª„Åß `expr2` „ÅÆÂàùÊúüÁä∂ÊÖã„Å´ÁßªÂãï„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇNFA „ÅÆÁõ¥Âàó„Å§„Å™„ÅéÁöÑ„Å™ÊÑü„Åò„Åß„Åô„Å≠„ÄÇ2 „Å§„ÅÆ NFA „ÇíÂêàÊàê„Åó„Å¶„Åß„Åç„ÅüÊñ∞„Åü„Å™ NFA „Å´„Å§„ÅÑ„Å¶„ÄÅÂàùÊúüÁä∂ÊÖã„ÅØ `s0`„ÄÅÂèóÁêÜÁä∂ÊÖã„ÅØ `t1` „Å®„Å™„Çä„Åæ„Åô„ÄÇ

„Åì„Çå„ÅßÈÄ£Êé•„Å´„Å§„ÅÑ„Å¶„ÅØ OK „Åß„Åô„ÄÇ‰ª•Èôç„ÅÆÊ≠£Ë¶èË°®Áèæ„Å´„Å§„ÅÑ„Å¶„ÄÅÂØæÂøú„Åó„Åü NFA „ÇíËÄÉ„Åà„Çã„Åü„ÇÅ„ÅÆÈÅìÂÖ∑„ÅØÊó¢„Å´„Åù„Çç„Å£„Å¶„ÅÑ„Çã„ÅÆ„Åß„ÄÅ„Åú„Å≤„ÅîËá™Ë∫´„ÅßÂ§âÊèõÊñπÊ≥ï„ÇíËÄÉ„Åà„Å¶„Åø„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ

### Ë´ñÁêÜÂíå

Ê¨°„Å´„ÄÅ2 „Å§„ÅÆÊ≠£Ë¶èË°®Áèæ `expr1`, `expr2` „ÅÆË´ñÁêÜÂíå `expr1|expr2` „Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„ÇãÊñπÊ≥ï„ÇíËÄÉ„Åà„Åæ„Åô„ÄÇÊñ∞„Åü„Å´ÂàùÊúüÁä∂ÊÖã `u0` „ÇíÁî®ÊÑè„Åó„Å¶„ÄÅ`expr1`, `expr2` „Åù„Çå„Åû„Çå„ÅÆÂàùÊúüÁä∂ÊÖã„Å∏ Œµ-ÈÅ∑Áßª„ÅßÁßªÂãï„Åß„Åç„Çã„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇÂèóÁêÜÁä∂ÊÖã„ÅØ„ÄÅÂÖÉ„ÅÆ 2 „Å§„ÅÆ NFA „ÅÆ„Åô„Åπ„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„ÅÆÈõÜÂêà (`s1`, `s2`, `t1`) „Å´„Å™„Çä„Åæ„Åô„ÄÇ„Åì„Å°„Çâ„ÅØ‰∏¶Âàó„Å§„Å™„ÅéÁöÑ„Å™ÊÑü„Åò„Åß„Åô„Å≠„ÄÇ

```mermaid
stateDiagram
    direction LR
    p0: u0 (start)
    state expr1 {
        direction LR
        q0: s0 (start)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    state expr2 {
        direction LR
        r0: t0 (start)
        r1: t1 (accept)
    }
    p0 --> q0: Œµ
    p0 --> r0: Œµ
    style p0 stroke:#000,fill:#fff;
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
    style r0 stroke:#000,fill:#fff;
    style r1 stroke:#000,fill:#fff,stroke-width:3px;
```

„Åì„Çå„ÅßË´ñÁêÜÂíå„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

### Êï∞ÈáèÂ≠ê `+`

Êï∞ÈáèË©û `+` „ÅØ„ÄåÁõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 1 Âõû‰ª•‰∏ä„ÅÆÁπ∞„ÇäËøî„Åó„Äç„Åß„Åó„Åü„ÄÇ`expr+` „Å´ÂØæÂøú„Åô„Çã NFA „ÇíËÄÉ„Åà„Çã„Åü„ÇÅ„Å´„ÄÅ„Åæ„Åö `expr` „Å´ÂØæÂøú„Åô„Çã NFA „Åå„Åß„Åç„Å¶„ÅÑ„Çã„Å®‰ªÆÂÆö„Åó„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr {
        q0: s0 (start)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
```

Áπ∞„ÇäËøî„Åó„Å´ÂØæÂøú„Åô„Çã„Å´„ÅØ„ÄÅ„Åô„Åπ„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„Åã„ÇâÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª„ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Åß„ÄÅÂèóÁêÜÁä∂ÊÖã„Å´„ÅÑ„ÇãÁä∂ÊÖã„Åã„Çâ„Åï„Çâ„Å´ÊñáÂ≠óÂàó„ÇíË™≠„ÇÄÂ†¥Âêà„Å´Áä∂ÊÖã„ÇíÂàùÊúüÁä∂ÊÖã„Å´„É™„Çª„ÉÉ„Éà„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr {
        q0: s0 (start)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    q1 --> q0: Œµ
    q2 --> q0: Œµ
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
```

„Åì„Çå„Åß `expr+` „Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

### Êï∞ÈáèÂ≠ê `*`

Êï∞ÈáèË©û `*` „ÅØ„ÄåÁõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 0 Âõû‰ª•‰∏ä„ÅÆÁπ∞„ÇäËøî„Åó„Äç„Åß„Åó„Åü„ÄÇ0 Âõû„Åß„ÇÇ OK „Å®„ÅÑ„ÅÜ„Åì„Å®„ÅØ„ÄÅÂàùÊúüÁä∂ÊÖã„ÅÆÊôÇÁÇπ„ÅßÂèóÁêÜ„Åï„Çå„Çã„ÅÆ„Åß„ÄÅÂÖà„Åª„Å©„ÅÆ `expr+` „Å´ÂØæÂøú„Åô„Çã NFA „Å´„Å§„ÅÑ„Å¶„ÄÅÂàùÊúüÁä∂ÊÖã„ÇíÂèóÁêÜÁä∂ÊÖã„Å´ËøΩÂä†„Åô„Çã„Å®„Çà„Åï„Åù„ÅÜ„Åß„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr {
        q0: s0 (start, accept)
        q1: s1 (accept)
        q2: s2 (accept)
    }
    q1 --> q0: Œµ
    q2 --> q0: Œµ
    style q0 stroke:#000,fill:#fff,stroke-width:3px;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
    style q2 stroke:#000,fill:#fff,stroke-width:3px;
```

„Åì„Çå„Åß `expr*` „Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

### Êï∞ÈáèÂ≠ê `?`

Êï∞ÈáèË©û `?` „ÅØ„ÄåÁõ¥Ââç„ÅÆÊ≠£Ë¶èË°®Áèæ„ÅÆ 0 „Åæ„Åü„ÅØ 1 Âõû„ÅÆÂá∫Áèæ„Äç„Åß„Åó„Åü„ÄÇ`*` „Å®Âêå„ÅòËÄÉ„ÅàÊñπ„Åß„ÄÅ`expr` „Å´ÂØæÂøú„Åô„Çã NFA „Å´„Å§„ÅÑ„Å¶ÂàùÊúüÁä∂ÊÖã„ÇíÂèóÁêÜÁä∂ÊÖã„Å´Âê´„ÇÅ„Çã„Å†„Åë„Åß OK „Åß„Åô„Å≠„ÄÇ

```mermaid
stateDiagram
    direction LR
    state expr {
        q0: s0 (start, accept)
        q1: s1 (accept)
    }
    style q0 stroke:#000,fill:#fff,stroke-width:3px;
    style q1 stroke:#000,fill:#fff,stroke-width:3px;
```

„Åì„Çå„Åß `expr?` „Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÊàê„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ
‰ª•‰∏ä„Åß„ÄÅÊ≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„Çí„Å§„Åè„Çã„Åü„ÇÅ„ÅÆÁêÜË´ñÁöÑÂÅ¥Èù¢„Çí„Åñ„Å£„Å®„Åä„Åï„Åà„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

# ÂÆüË£ÖÁ∑®

„Åì„Åì„Åß„ÅØ„ÄÅTypeScript „ÅÆÂûãÊ©üËÉΩ„ÅÆ„Åø„ÇíÁî®„ÅÑ„ÅüÊ≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„ÇíÂÆüË£Ö„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

## Lexer

„Åæ„Åö„ÄÅÂ≠óÂè•Ëß£Êûê„É¢„Ç∏„É•„Éº„É´ `lexer` „ÇíÂÆüË£Ö„Åó„Å¶„ÅÑ„Åç„Åæ„Åó„Çá„ÅÜÔºÅ
„ÅØ„Åò„ÇÅ„Å´„ÄÅ„Éà„Éº„ÇØ„É≥„Å´Èñ¢ÈÄ£„Åô„ÇãÂûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```ts: token.ts
// „Éà„Éº„ÇØ„É≥„ÅÆÂü∫Â∫ïÂûã
type Token = { type: string };

// ÂêÑ„Éà„Éº„ÇØ„É≥„ÅÆÂûã
type TokenLParen = Token & { type: "LPAREN" };
type TokenRParen = Token & { type: "RPAREN" };
type TokenUnion = Token & { type: "UNION" };
type TokenPlus = Token & { type: "PLUS" };
type TokenStar = Token & { type: "STAR" };
type TokenOption = Token & { type: "OPTION" };
type TokenDot = Token & { type: "DOT" };
type TokenChar<C extends string> = Token & { type: "CHAR"; char: C };
type TokenAnchorStart = Token & { type: "ANCHOR_START" };
type TokenAnchorEnd = Token & { type: "ANCHOR_END" };
```

„Åæ„Åö„Éà„Éº„ÇØ„É≥„ÅÆÂü∫Â∫ïÂûã„Å®„Åó„Å¶ `string` Âûã„ÅÆ `type` „Éó„É≠„Éë„ÉÜ„Ç£„ÇíÊåÅ„Å£„Åü„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂûã„Åß„ÅÇ„Çã `Token` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇÊ¨°„Å´„ÄÅ`TokenLParen` „Åß„ÅØ `LPAREN` „Å®„ÅÑ„Å£„ÅüÂÖ∑Âêà„Å´„ÄÅ `type` „ÅßÁâπÂÆö„ÅÆÊñáÂ≠óÂàó„ÇíÊåáÂÆö„Åô„Çã„Åì„Å®„ÅßÂÖ∑‰ΩìÁöÑ„Å™„Éà„Éº„ÇØ„É≥„ÇíÊåáÂÆö„Åó„Åæ„Åô„ÄÇ„Åü„Å†„Åó„ÄÅ„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Å´ÂØæÂøú„Åô„Çã `TokenChar` „Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÊåáÂÆö„Åï„Çå„ÅüÊñáÂ≠ó„Çí‰øùÊåÅ„Åó„Å¶„Åä„ÅèÂøÖË¶Å„Åå„ÅÇ„Çã„Åü„ÇÅ„ÄÅÂûã„Éë„É©„É°„Éº„Çø `S` „Çí„Å®„Å£„Å¶ `char` „Éó„É≠„Éë„ÉÜ„Ç£„ÅÆÂûã„Å®„Åó„Åæ„Åô„ÄÇ

„Åæ„Åü„ÄÅÂà©‰æøÊÄß„ÅÆ„Åü„ÇÅ„Å´Ê≠£Ë¶èË°®ÁèæÊñáÂ≠ó„Å®„Éà„Éº„ÇØ„É≥Âûã„ÅÆ„Éû„ÉÉ„Éî„É≥„Ç∞„ÇíË°®Áèæ„Åó„ÅüÂûã `TokenMap` „ÇíÂÆöÁæ©„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

```ts: token.ts
type TokenMap = {
  "(": TokenLParen;
  ")": TokenRParen;
  "|": TokenUnion;
  "+": TokenPlus;
  "*": TokenStar;
  "?": TokenOption;
  ".": TokenDot;
  "^": TokenAnchorStart;
  $: TokenAnchorEnd;
};
```

Ê¨°„Å´„ÄÅ„É°„Ç§„É≥„Å®„Å™„ÇãÂ≠óÂè•Ëß£ÊûêÂûã `Lexer` „ÅÆÂÆöÁæ©„Åß„Åô„ÄÇ

```ts: lexer.ts
// Â≠óÂè•Ëß£ÊûêÂûã
type Lexer<S extends string> = LexerInternal<S>;

// Â≠óÂè•Ëß£ÊûêÂûã (ÂÜÖÈÉ®Âûã)
type LexerInternal<
  S extends string,
  Tokens extends Token[] = []
> = S extends `${infer Head}${infer Tail}`
  ? Head extends keyof TokenMap
    // TokenMap „Å´Â≠òÂú®„Åô„Çã„Å®„Åç„ÅØ„Åù„ÅÆ„Éà„Éº„ÇØ„É≥„ÇíËøΩÂä†
    ? LexerInternal<Tail, [...Tokens, TokenMap[Head]]>
    : Head extends "\\"
    // „Ç®„Çπ„Ç±„Éº„ÉóÊñáÂ≠ó„ÅÆÂ†¥Âêà„ÅØ„Åù„ÅÆÊñáÂ≠ó„ÅÆ„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éà„Éº„ÇØ„É≥„ÇíËøΩÂä†
    ? Tail extends `${infer EscapedChar}${infer EscapedTail}`
      ? LexerInternal<EscapedTail, [...Tokens, TokenChar<EscapedChar>]>
      : never
    : Head extends string
    // „Åù„ÅÆ‰ªñ„ÅÆÂ†¥Âêà„ÅØ C „ÅÆ„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éà„Éº„ÇØ„É≥„Å®„Åó„Å¶Ëß£Èáà
    ? LexerInternal<Tail, [...Tokens, TokenChar<Head>]>
    : never
  : {
      tokens: Tokens;
    };
```

„Åæ„Åö `LexerInternal` „ÅÆÂûãÂºïÊï∞„Å´„Å§„ÅÑ„Å¶„ÄÅ`S` „ÅØÊ≠£Ë¶èË°®Áèæ„Å®„Åó„Å¶Ëß£Èáà„Åô„ÇãÊñáÂ≠óÂàó„ÄÅ`Tokens` „ÅØÂ≠óÂè•Ëß£ÊûêÁµêÊûú„ÅÆ„Éà„Éº„ÇØ„É≥Âàó `Token[]` „Åß„Åô„ÄÇ„Éë„É©„É°„Éº„Çø `Tokens` „ÅØ„ÅÇ„Åè„Åæ„Åß„ÇÇ `LexerInternal` „ÅÆÂÜçÂ∏∞Âá¶ÁêÜ„ÅÆ„Åü„ÇÅ„ÅÆ„ÇÇ„ÅÆ„Å™„ÅÆ„Åß„ÄÅ„É©„ÉÉ„Éó„Åó„ÅüÂûã `Lexer` „ÇíÂÆöÁæ©„Åó„ÄÅÂ§ñÂÅ¥„Åã„Çâ„ÅØ„Åì„Å°„Çâ„Çí‰Ωø„Å£„Å¶„ÇÇ„Çâ„ÅÜ„Çà„ÅÜ„Å´„Åó„Åæ„Åô„ÄÇ

`LexerInternal` „Åß„ÅØ„ÄÅ[Template Literal Types](https://www.typescriptlang.org/docs/handbook/2/template-literal-types.html) „Å´„Çà„Å£„Å¶ `S` „ÅÆÊñáÂ≠óÂàó„ÇíÂÖàÈ†≠„Åã„ÇâË™≠„ÅøËæº„Çì„Åß„ÅÑ„Åç„ÄÅ‰æã„Åà„Å∞ `(` „Å´‰∏ÄËá¥„Åó„Åü„Å®„Åç„ÅØ„ÄÅ„ÄåÊÆã„Çä„ÅÆÊñáÂ≠óÂàó `Tail`„Äç„Å®„Äå`TokenLParen` „ÇíËøΩÂä†„Åó„Åü„Éà„Éº„ÇØ„É≥Âàó„Äç„ÇíÂÖ•Âäõ„Å®„Åô„Çã `LexerInternal` „ÇíËøî„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆ„Çà„ÅÜ„Å´„ÄÅÂÜçÂ∏∞ÁöÑ„Å´Ê¨°„Å´Á∂ö„ÅèÊñáÂ≠óÂàó„ÇíÂá¶ÁêÜ„Åó„Å™„Åå„Çâ„Éà„Éº„ÇØ„É≥Âàó `Tokens` „ÇíÁîüÊàê„Åó„Åæ„Åô„ÄÇÂêÑÊ≠£Ë¶èË°®ÁèæË®òÂè∑„Å´„Éû„ÉÉ„ÉÅ„Åô„Çã„Åã„Å©„ÅÜ„Åã„ÇíÊõ∏„ÅçÈÄ£„Å≠„Çã‰ª£„Çè„Çä„Å´„Åì„Åì„Åß `TokenMap` „ÇíÁî®„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ

`S` „ÅÆÂÖàÈ†≠ `Head` „Åå„Ç®„Çπ„Ç±„Éº„Éó `\` „Å´‰∏ÄËá¥„Åô„ÇãÂ†¥Âêà„ÅØ„Åù„ÅÆÊ¨°„ÅÆÊñáÂ≠ó„Çí `EscapedChar` „Å®„Åó„Å¶„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éà„Éº„ÇØ„É≥ `TokenChar<EscapedChar>` „ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ‰ª•‰∏ä„ÅÆ„Å©„Çå„Å´„ÇÇÂΩì„Å¶„ÅØ„Åæ„Çâ„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅÂÖàÈ†≠ÊñáÂ≠ó `Head` „Å´ÂØæÂøú„Åô„ÇãÊñáÂ≠óÂàó„Éà„Éº„ÇØ„É≥ `TokenChar<Head>` „ÇíËøΩÂä†„Åó„Åæ„Åô„ÄÇ

„Åì„Çå„Åß„ÄÅÂ≠óÂè•Ëß£ÊûêÂûã `Lexer` „Åå„Åß„Åç„Åæ„Åó„ÅüÔºÅ
‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„ÄÅÊ≠£Ë¶èË°®ÁèæÊñáÂ≠óÂàó„Çí‰∏é„Åà„Çã„Å®„ÄÅ„Åù„Çå„Å´ÂØæÂøú„Åô„Çã„Éà„Éº„ÇØ„É≥Âàó„Å´Â§âÊèõ„Åï„Çå„Åæ„Åô„ÄÇ

```ts
type Result = Lexer<"(a|b)+">;
// [TokenLParen, TokenChar<"a">, TokenUnion, TokenChar<"b">, TokenRParen, TokenPlus]
```

## Parser

Ê¨°„Å´„ÄÅ„Éà„Éº„ÇØ„É≥Âàó„Åã„ÇâÊäΩË±°ÊßãÊñáÊú®„ÇíÊßãÊàê„Åô„ÇãÊßãÊñáËß£ÊûêÂûã `Parser` „Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ
„Åæ„Åö„ÄÅÊäΩË±°ÊßãÊñáÊú®„ÇíË°®„ÅôÂûã„ÇíÁî®ÊÑè„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

### ASTNode

```ts: ast.ts
// ÊäΩË±°ÊßãÊñáÊú®„ÅÆ„Éé„Éº„ÉâÂü∫Â∫ïÂûã
type ASTNode = { id: string; type: string };
```

ÊäΩË±°ÊßãÊñáÊú®„ÅÆ„Éé„Éº„ÉâÂü∫Â∫ïÂûã `ASTNode` „ÅØ„ÄÅ„Éé„Éº„ÉâÂõ∫Êúâ„ÅÆË≠òÂà•Â≠ê `id` „Å®„Éé„Éº„Éâ„ÅÆÁ®ÆÈ°û `type` „ÇíÊåÅ„Å§„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂûã„Å®„Åó„ÄÅ„Åù„Çå„Åû„Çå `string` Âûã„Å®„Åó„Åæ„Åô„ÄÇ

### ASTNodeRoot

ÂÖ∑‰ΩìÁöÑ„Å™„Éé„Éº„Éâ„Å´„Å§„ÅÑ„Å¶„ÄÅ„Åæ„Åö„ÅØÊßãÊñáÊú®„ÅÆÊ†π„Éé„Éº„Éâ„Å®„Å™„Çã `ASTNodeRoot` Âûã„Çí‰Ωú„Çä„Åæ„Åô„ÄÇ

```ts: ast.ts
// Ê†π„Éé„Éº„ÉâÂûã
type ASTNodeRootId = "#";
type ASTNodeRoot<Child extends ASTNode = ASTNode> = ASTNode & {
  id: ASTNodeRootId;
  type: "ROOT";
  child: Child;
};
```

„Éë„É©„É°„Éº„Çø `Child` „ÅØÂ≠ê„Å®„Å™„Çã„Éé„Éº„Éâ `ASTNode` „Åß„Åô„ÄÇ`id` „ÅØ„Å™„Çì„Åß„ÇÇ„ÅÑ„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅ„Åì„Åì„Åß„ÅØÊñáÂ≠ó `#` „Å®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### ASTNodeUnion

Ê¨°„Å´„ÄÅË´ñÁêÜÂíå `|` „Éé„Éº„ÉâÂûã `ASTNodeUnion` „ÅÆÂÆöÁæ©„Åß„Åô„ÄÇ

```ts: ast.ts
// Ë´ñÁêÜÂíå„Éé„Éº„ÉâÂûã
type ASTNodeUnionId<ParentId extends ASTNode["id"]> = `${ParentId}u`;
type ASTNodeUnionIdL<ParentId extends ASTNode["id"]> = `${ParentId}u-l`;
type ASTNodeUnionIdR<ParentId extends ASTNode["id"]> = `${ParentId}u-r`;
type ASTNodeUnion<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  LChild extends ASTNode = ASTNode,
  RChild extends ASTNode = ASTNode
> = ASTNode & {
  id: ASTNodeUnionId<ParentId>;
  type: "UNION";
  left: LChild;
  right: RChild;
};
```

ÂêÑ„Éë„É©„É°„Éº„Çø„Å´„Å§„ÅÑ„Å¶„ÄÅ`ParentId` „ÅØË¶™„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê„ÄÅ`LChild` „ÅØÂè≥„ÅÆÂ≠ê„Éé„Éº„Éâ„ÄÅ`RChild` „ÅØÂ∑¶„ÅÆÂ≠ê„Éé„Éº„Éâ„Åß„Åô„ÄÇ`ASTNodeUnion` „ÅÆË≠òÂà•Â≠ê `ASTNodeUnionId` „ÅØ„ÄÅË¶™„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê `ParentId` „Å´ `u` „Çí‰ªò„Åë„Åü„ÇÇ„ÅÆ„Å®„Åó„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅÂ∑¶Âè≥„ÅÆÂ≠ê„Éé„Éº„Éâ„ÅåÂêå„Åò `type` „ÇíÊåÅ„Å§Â†¥Âêà„Å´„Åù„Çå„Çâ„ÇíÂå∫Âà•„Åô„Çã„Åü„ÇÅ„Å´„ÄÅÂ≠ê„Éé„Éº„Éâ„Åã„ÇâË¶ã„ÅüË¶™„Éé„Éº„Éâ„ÅÆÂ∑¶Âè≥„Åß„ÅÆË≠òÂà•Â≠ê `ASTNodeUnionIdL/R` „ÇíÂà•„ÅßÂÆöÁæ©„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

### ASTNodeConcat

```ts: ast.ts
// ÈÄ£Êé•„Éé„Éº„ÉâÂûã
type ASTNodeConcatId<ParentId extends ASTNode["id"]> = `${ParentId}c`;
type ASTNodeConcatIdL<ParentId extends ASTNode["id"]> = `${ParentId}c-l`;
type ASTNodeConcatIdR<ParentId extends ASTNode["id"]> = `${ParentId}c-r`;
type ASTNodeConcat<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  LChild extends ASTNode = ASTNode,
  RChild extends ASTNode = ASTNode
> = ASTNode & {
  id: ASTNodeConcatId<ParentId>;
  type: "CONCAT";
  left: LChild;
  right: RChild;
};
```

ÈÄ£Êé•„Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇË´ñÁêÜÂíå„ÅÆ„ÇÇ„ÅÆ„Å®„Åª„ÅºÂêå„Åò„Åß„Åô„ÄÇ

### ASTNodePlus

```ts: ast.ts
// Êï∞ÈáèÂ≠ê + „Éé„Éº„ÉâÂûã
type ASTNodePlusId<ParentId extends ASTNode["id"]> = `${ParentId}p`;
type ASTNodePlus<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  Child extends ASTNode = ASTNode
> = ASTNode & {
  id: ASTNodePlusId<ParentId>;
  type: "PLUS";
  child: Child;
};
```

Êï∞ÈáèË©û `+` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇË≠òÂà•Â≠ê„ÅØË¶™„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê„Å´ `p` „Çí‰ªò„ÅëÂä†„Åà„Åü„ÇÇ„ÅÆ„Åß„ÄÅ„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶Ë¶™„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê `ParentId` „Å®Â≠ê„Éé„Éº„Éâ„ÅÆÂûã `Child` „ÇíÂèñ„Å£„Å¶„Éó„É≠„Éë„ÉÜ„Ç£ `child` „Çí‰ªò„ÅëÂä†„Åà„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÄÅ`Child` „ÅØ `+` „ÅÆÂØæË±°„Å®„Å™„ÇãÊ≠£Ë¶èË°®Áèæ„Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÇíÊÉ≥ÂÆö„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### ASTNodeStar

```ts: ast.ts
// Êï∞ÈáèÂ≠ê * „Éé„Éº„ÉâÂûã
type ASTNodeStarId<ParentId extends ASTNode["id"]> = `${ParentId}s`;
type ASTNodeStar<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  Child extends ASTNode = ASTNode
> = ASTNode & {
  id: ASTNodeStarId<ParentId>;
  type: "STAR";
  child: Child;
};
```

Êï∞ÈáèË©û `*` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇÊï∞ÈáèË©û `+` „ÅÆ„ÇÇ„ÅÆ„Å®„Åª„ÅºÂêå„Åò„Åß„Åô„ÄÇ

### ASTNodeOption

```ts: ast.ts
// Êï∞ÈáèÂ≠ê ? „Éé„Éº„ÉâÂûã
type ASTNodeOptionId<ParentId extends ASTNode["id"]> = `${ParentId}o`;
type ASTNodeOption<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  Child extends ASTNode = ASTNode
> = ASTNode & {
  id: ASTNodeOptionId<ParentId>;
  type: "OPTION";
  child: Child;
};
```

Êï∞ÈáèË©û `?` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇ„Åì„Å°„Çâ„ÇÇ„ÄÅÊï∞ÈáèË©û `+` „ÅÆ„ÇÇ„ÅÆ„Å®„Åª„ÅºÂêå„Åò„Åß„Åô„ÄÇ

### ASTNodeDot

```ts: ast.ts
// „ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ„Éé„Éº„ÉâÂûã
type ASTNodeDotId<ParentId extends ASTNode["id"]> = `${ParentId}d`;
type ASTNodeDot<ParentId extends ASTNode["id"] = ASTNode["id"]> = ASTNode & {
  id: ASTNodeDotId<ParentId>;
  type: "DOT";
};
```

„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ `.` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇ‰ªªÊÑè„ÅÆ 1 ÊñáÂ≠ó„ÇíË°®„Åô„ÅÆ„ÅßÂ≠êË¶ÅÁ¥†„ÅØ„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ

### ASTNodeChar

```ts: ast.ts
// „É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éé„Éº„ÉâÂûã
type ASTNodeCharId<
  ParentId extends ASTNode["id"],
  Char extends string
> = `${ParentId}c-${Char}-`;
type ASTNodeChar<
  ParentId extends ASTNode["id"] = ASTNode["id"],
  Char extends string = string
> = ASTNode & {
  id: ASTNodeCharId<ParentId, Char>;
  type: "CHAR";
  char: Char;
};
```

„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇÊ≠£Ë¶èË°®Áèæ„ÅÆ„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Å´Áõ∏ÂΩì„Åô„ÇãÊñáÂ≠óÂàó„É™„ÉÜ„É©„É´Âûã `Char` „ÇíÂûã„Éë„É©„É°„Éº„Çø„Å´Âèñ„Å£„Å¶„ÄÅ`Char` Âûã„ÅÆ„Éó„É≠„Éë„ÉÜ„Ç£ `char` „Çí‰ªò„ÅëÂä†„Åà„Åæ„Åô„ÄÇË≠òÂà•Â≠ê„ÅØË¶™„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê„Å´ `c-${C}-` „Çí‰ªò„ÅëÂä†„Åà„Åü„ÇÇ„ÅÆ„Å®„Åó„Åæ„Åô„ÄÇ

### ASTNodeError

```ts: ast.ts
// „Ç®„É©„Éº„Éé„Éº„ÉâÂûã
type ASTNodeParseError = ASTNode & {
  id: "#error";
  type: "ERROR";
};
```

ÊßãÊñáËß£ÊûêÊôÇ„Å´„ÅÜ„Åæ„Åè„Éë„Éº„Çπ„Åß„Åç„Å™„Åã„Å£„ÅüÂ†¥Âêà„ÅÆ„Éé„Éº„Éâ„ÅÆÂûã„Åß„Åô„ÄÇ
ÊäΩË±°ÊßãÊñáÊú®„Å´Èñ¢„Åô„ÇãÂûã„ÅÆÂÆöÁæ©„ÅØ‰ª•‰∏ä„Åß„Åô„ÄÇ

### Parser

Ê¨°„Å´„ÄÅÊäΩË±°ÊßãÊñáÊú®„ÇíÊßãÁØâ„Åô„ÇãÊßãÊñáËß£ÊûêÂûã `Parser` „Çí„Å§„Åè„Å£„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØ„ÄÅ‰ªäÂõûÂÆüË£Ö„Åô„ÇãÊ≠£Ë¶èË°®Áèæ„ÅÆ BNF „ÅåÊ†∏„Å®„Å™„Çã„ÅÆ„ÅßÂÜçÊé≤„Åó„Å¶„Åä„Åç„Åæ„Åô„ÄÇ

```xml
<regexp> ::= <union-expr>
<union-expr> ::= <concat-expr> UNION <union-expr> | <concat-expr>
<concat-expr> ::= <plus-expr> <concat-expr> | <plus-expr>
<plus-expr> ::= <factor-expr> PLUS | <star-expr>
<star-expr> ::= <factor-expr> STAR | <option-expr>
<option-expr> ::= <factor-expr> OPTION | <factor-expr>
<factor-expr> ::= LPAREN <union-expr> RPAREN | DOT | CHAR(x)
```

### ParseUnionExpr

„Åæ„Åö„ÄÅË¶èÂâá `<union-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParseUnionExpr` Âûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```ts parser.ts
// <union-expr> ::= <concat-expr> UNION <union-expr> | <concat-expr>
type ParseUnionExpr<
  ParentId extends string,
  Tokens extends Token[],
  LeftTokens extends Token[] = []
> = Tokens extends [infer Head extends Token, ...infer Tail extends Token[]]
  ? [
      ParseConcatExpr<ASTNodeUnionIdL<ParentId>, LeftTokens>,
      Head,
      ParseUnionExpr<ASTNodeUnionIdR<ParentId>, Tail>
    ] extends [
      infer ParseConcatExprResult extends ASTNode,
      TokenUnion,
      infer ParseUnionExprResult extends ASTNode
    ]
    ? [ParseConcatExprResult, ParseUnionExprResult] extends
        | [ASTNodeParseError, unknown]
        | [unknown, ASTNodeParseError]
      ? ParseUnionExpr<ParentId, Tail, [...LeftTokens, Head]>
      : ASTNodeUnion<ParentId, ParseConcatExprResult, ParseUnionExprResult>
    : ParseUnionExpr<ParentId, Tail, [...LeftTokens, Head]>
  : ParseConcatExpr<ParentId, LeftTokens>;
```

`Tokens` „ÅÆ„Éà„Éº„ÇØ„É≥„ÇíÂÖàÈ†≠„Åã„ÇâÈ†Ü„Å´Ë¶ã„Å¶„ÅÑ„Åç„ÄÅÁèæÂú®Ê≥®ÁõÆ„Åó„Å¶„ÅÑ„Çã„Éà„Éº„ÇØ„É≥ `Head` „Å´„Å§„ÅÑ„Å¶„ÄÅ`Head` „Åå `TokenUnion` „ÅÆÂ†¥Âêà„Å´„ÄÅ `Head` „Çà„Çä„ÇÇÂ∑¶„ÅÆ„Éà„Éº„ÇØ„É≥Âàó `LeftTokens` „Çí `ConcatExpr` „Å®„Åó„Å¶„Éë„Éº„Çπ„ÄÅ`Head` „Çà„Çä„ÇÇÂè≥„ÅÆ„Éà„Éº„ÇØ„É≥Âàó `Tail` „Çí `UnionExpr` „Å®„Åó„Å¶„Éë„Éº„Çπ„Åó„Åæ„Åô„ÄÇ„Éë„Éº„Çπ„Å´ÊàêÂäü„Åó„Åü („Å©„Å°„Çâ„ÇÇ„Ç®„É©„Éº„Éé„Éº„Éâ `ASTNodeParseError` „Åß„Å™„ÅÑ) Â†¥Âêà„ÅØ„ÄÅ„Éé„Éº„Éâ `ASTNodeUnion` „Çí„Å§„Åè„Å£„Å¶Ëøî„Åó„Åæ„Åô„ÄÇ„Éë„Éº„Çπ„Å´Â§±Êïó„Åó„ÅüÂ†¥Âêà„ÅØ„ÄÅÊ¨°„ÅÆ„Éà„Éº„ÇØ„É≥„Å´Ê≥®ÁõÆ„Åó„ÅüÁä∂ÊÖã„ÅÆ `ParseUnionExpr` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

ÊúÄÂæå„ÅÆ„Éà„Éº„ÇØ„É≥„Åæ„ÅßË™≠„ÅøËæº„Çì„Å†Áä∂ÊÖã (`Tokens` „Åå„Åô„Åπ„Å¶ `LeftTokens` „Å´Áßª„Å£„ÅüÁä∂ÊÖã) „Å´„Å™„Å£„Åü„Å®„Åç„ÅØ `<concat-expr> UNION <union-expr>` „Åß„Éë„Éº„Çπ„Åß„Åç„Å™„Åã„Å£„Åü„Å®„ÅÑ„ÅÜ„Åì„Å®„Å™„ÅÆ„Åß„ÄÅ`<concat-expr>` „Å®„Åó„Å¶Ëß£Èáà„Åó„Å¶„Éë„Éº„Çπ„Åô„Çã„Åü„ÇÅ„Å´ `ParseConcatExpr` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

### ParseConcatExpr

Ë¶èÂâá `<concat-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParseConcatExpr` Âûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇÂÖà„Åª„Å©„ÅÆ `ParseUnionExpr` „Åß„ÅØ„ÄÅÁùÄÁõÆ„Åô„Çã„Éà„Éº„ÇØ„É≥„ÇíÈÄ≤„ÇÅ„Å™„Åå„Çâ `<concat-expr> UNION <union-expr>` „ÅåÈÅ©Áî®„Åß„Åç„Çã„Åã„Å©„ÅÜ„ÅãÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Åæ„Åó„Åü„Åå„ÄÅ„Åì„Åì„Åß„ÅØ `<plus-expr> <concat-expr>` „ÅåÈÅ©Áî®„Åß„Åç„Çã„Åã„Å©„ÅÜ„Åã„ÇíÁ¢∫Ë™ç„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ

```ts parser.ts
// <concat-expr> ::= <plus-expr> <concat-expr> | <plus-expr>
type ParseConcatExpr<
  ParentId extends string,
  Tokens extends Token[],
  LeftTokens extends Token[] = []
> = Tokens extends [infer Head extends Token, ...infer Tail extends Token[]]
  ? [
      ParsePlusExpr<ASTNodeConcatIdL<ParentId>, [...LeftTokens, Head]>,
      ParseConcatExpr<ASTNodeConcatIdR<ParentId>, Tail>
    ] extends [
      infer ParsePlusExprResult extends ASTNode,
      infer ParseConcatExprResult extends ASTNode
    ]
    ? [ParsePlusExprResult, ParseConcatExprResult] extends
        | [ASTNodeParseError, unknown]
        | [unknown, ASTNodeParseError]
      ? ParseConcatExpr<ParentId, Tail, [...LeftTokens, Head]>
      : ASTNodeConcat<ParentId, ParsePlusExprResult, ParseConcatExprResult>
    : ParseConcatExpr<ParentId, Tail, [...LeftTokens, Head]>
  : ParsePlusExpr<ParentId, LeftTokens>;
```

`ParseUnionExpr` „Å®„Åª„ÅºÂêå„Åò„Åß„Åô„ÄÇ

### ParsePlusExpr

Ë¶èÂâá `<plus-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParsePlusExpr` Âûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```ts parser.ts
// <plus-expr> ::= <factor-expr> PLUS | <star-expr>
type ParsePlusExpr<
  ParentId extends string,
  Tokens extends Token[]
> = Tokens extends [...infer FactorTokens extends Token[], TokenPlus]
  ? ParseFactorExpr<
      ASTNodePlusId<ParentId>,
      FactorTokens
    > extends infer ParseFactorExprResult extends ASTNode
    ? ParseFactorExprResult extends ASTNodeParseError
      ? ParseStarExpr<ParentId, Tokens>
      : ASTNodePlus<ParentId, ParseFactorExprResult>
    : ParseStarExpr<ParentId, Tokens>
  : ParseStarExpr<ParentId, Tokens>;
```

Âèó„ÅëÂèñ„Å£„Åü„Éà„Éº„ÇØ„É≥Âàó `Tokens` „ÅÆÊú´Â∞æ„ÅÆ„Éà„Éº„ÇØ„É≥„Åå `TokenPlus` „ÅÆÂ†¥Âêà„ÅØ„ÄÅË¶èÂâá `<plus-expr>` „ÅÆÂ∑¶ÂÅ¥ `<factor-expr> PLUS` „ÇíÈÅ©Áî®ÂèØËÉΩ„Å™„ÅÆ„Åß„ÄÅÊú´Â∞æ‰ª•Â§ñ„ÅÆ„Éà„Éº„ÇØ„É≥Âàó `FactorTokens` „Çí `ParseFactorExpr` (ÂæåËø∞) „Åß„Éë„Éº„Çπ„Åó„Åæ„Åô„ÄÇ„Éë„Éº„Çπ„Å´ÊàêÂäü„Åó„ÅüÂ†¥Âêà„ÅØ„ÄÅ„Éé„Éº„Éâ `ASTNodePlus` „Çí„Å§„Åè„Å£„Å¶„Åã„Åà„Åó„Åæ„Åô„ÄÇ„Éë„Éº„Çπ„Å´Â§±Êïó„Åó„ÅüÂ†¥Âêà„ÅØ„ÄÅË¶èÂâá `<star-expr>` „ÇíÈÅ©Áî®„Åô„Çã„Åü„ÇÅ„Å´ `ParseStarExpr` (ÂæåËø∞) „ÇíËøî„Åó„Åæ„Åô„ÄÇ

### ParseStarExpr

```ts parser.ts
// <star-expr> ::= <factor-expr> STAR | <option-expr>
type ParseStarExpr<
  ParentId extends string,
  Tokens extends Token[]
> = Tokens extends [...infer FactorTokens extends Token[], TokenStar]
  ? ParseFactorExpr<
      ASTNodeStarId<ParentId>,
      FactorTokens
    > extends infer ParseFactorExprResult extends ASTNode
    ? ParseFactorExprResult extends ASTNodeParseError
      ? ParseOptionExpr<ParentId, Tokens>
      : ASTNodeStar<ParentId, ParseFactorExprResult>
    : ParseOptionExpr<ParentId, Tokens>
  : ParseOptionExpr<ParentId, Tokens>;
```

Ë¶èÂâá `<star-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParseStarExpr` Âûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ`ParsePlusExpr` „Å®„Åª„ÅºÂêå„Åò„Å™„ÅÆ„Åß„ÄÅË™¨Êòé„ÅØÁúÅ„Åç„Åæ„Åô„ÄÇ

### ParseOptionExpr

```ts parser.ts
// <option-expr> ::= <factor-expr> OPTION | <factor-expr>
type ParseOptionExpr<
  ParentId extends string,
  Tokens extends Token[]
> = Tokens extends [...infer FactorTokens extends Token[], TokenOption]
  ? ParseFactorExpr<
      ASTNodeOptionId<ParentId>,
      FactorTokens
    > extends infer ParseFactorExprResult extends ASTNode
    ? ParseFactorExprResult extends ASTNodeParseError
      ? ParseFactorExpr<ParentId, Tokens>
      : ASTNodeOption<ParentId, ParseFactorExprResult>
    : ParseFactorExpr<ParentId, Tokens>
  : ParseFactorExpr<ParentId, Tokens>;
```

Ë¶èÂâá `<option-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParseOptionExpr` Âûã„Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ„Åì„Å°„Çâ„ÇÇ `ParsePlusExpr` „Å®„Åª„ÅºÂêå„Åò„Å™„ÅÆ„Åß„ÄÅË™¨Êòé„ÅØÁúÅ„Åç„Åæ„Åô„ÄÇ

### ParseFactorExpr

```ts parser.ts
// <factor-expr> ::= LPAREN <union-expr> RPAREN | DOT | CHAR(x)
type ParseFactorExpr<
  ParentId extends string,
  Tokens extends Token[]
> = Tokens extends [
  TokenLParen,
  ...infer UnionTokens extends Token[],
  TokenRParen
]
  ? UnionTokens extends []
    ? ASTNodeChar<ParentId, "">
    : ParseUnionExpr<ParentId, UnionTokens>
  : Tokens extends [TokenDot]
  ? ASTNodeDot<ParentId>
  : Tokens extends [TokenChar<infer Char extends string>]
  ? ASTNodeChar<ParentId, Char>
  : ASTNodeParseError;
```

Ë¶èÂâá `<factor-expr>` „Å´Âü∫„Å•„ÅÑ„Å¶„Éë„Éº„Çπ„ÇíË°å„ÅÜ `ParseFactorExpr` Âûã„ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

„Åæ„Åö„ÄÅ‰∏é„Åà„Çâ„Çå„Åü„Éà„Éº„ÇØ„É≥Âàó„Åå `(UnionExpr)` „Å´ÂêàËá¥„Åô„Çã„ÅãÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇ„Éà„Éº„ÇØ„É≥Âàó„ÅÆÂÖàÈ†≠„Åå `(`, Êú´Â∞æ„Åå `)` „Å®„Å™„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„ÅØ„ÄÅ„Åù„ÅÆÈñì„ÅÆ„Éà„Éº„ÇØ„É≥Âàó `UnionTokens` „Çí `ParseUnionExpr` „Å´Ê∏°„Åó„ÄÅË¶èÂâá `<union-expr>` „Å´Âü∫„Å•„ÅÑ„Åü„Éë„Éº„ÇπÂá¶ÁêÜ„ÇíÂßî„Å≠„Åæ„Åô„ÄÇ

`(UnionExpr)` „Å´ÂêàËá¥„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Éà„Éº„ÇØ„É≥Âàó„Åå `Dot` „Å´ÂêàËá¥„Åô„Çã„ÅãÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇÂêàËá¥„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ `.` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ `ASTNodeDot` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

`Dot` „Å´ÂêàËá¥„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ`Char` „Å´ÂêàËá¥„Åô„Çã„Åã„Å©„ÅÜ„ÅãÁ¢∫Ë™ç„Åó„Åæ„Åô„ÄÇÂêàËá¥„Åô„ÇãÂ†¥Âêà„ÅØ„ÄÅ„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éé„Éº„Éâ `ASTNodeChar<ParentId, Char>` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

‰ª•‰∏ä„ÅÆ„ÅÑ„Åö„Çå„Å´„ÇÇÂêàËá¥„Åó„Å™„ÅÑÂ†¥Âêà„ÅØ„ÄÅ„Ç®„É©„ÉºÁä∂ÊÖã„ÇíË°®„Åô„Éé„Éº„Éâ `ASTNodeParseError` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

### Parser

ÊúÄÂæå„Å´ÊßãÊñáËß£ÊûêÂûã Parser „Çí‰ΩúÊàê„Åó„Åæ„Åô„ÄÇ

```ts: parser.ts
// ÊßãÊñáËß£ÊûêÂûã
type Parser<Tokens extends Token[]> =
  ParseOption<Tokens> extends infer ParseOptionResult extends {
    tokens: Token[];
    option: TRegExpOption;
  }
    ? {
        ast: ASTNodeRoot<
          ParseUnionExpr<ASTNodeRootId, ParseOptionResult["tokens"]>
        >;
        option: ParseOptionResult["option"];
      }
    : never;

type ParseOption<
  Tokens extends Token[],
  Option extends TRegExpOption = {}
> = Tokens extends [TokenAnchorStart, ...infer Rest extends Token[]]
  ? ParseOption<Rest, Option & { anchorStart: true }>
  : Tokens extends [...infer Rest extends Token[], TokenAnchorEnd]
  ? ParseOption<Rest, Option & { anchorEnd: true }>
  : {
      tokens: Tokens;
      option: Option;
    };
```

‰ªäÂõû„ÅÆÂÆüË£Ö„Åß„ÅØ„Ç¢„É≥„Ç´„Éº (`^`,`$`) „Çí„Ç™„Éó„Ç∑„Éß„É≥„Å®„Åó„Å¶Êâ±„ÅÑ„ÄÅÊßãÊñáÊú®„Å®„ÅØÂàÜÈõ¢„Åï„Åõ„Åæ„Åô„ÄÇÂÖ∑‰ΩìÁöÑ„Å™Âá¶ÁêÜ„ÅÆË™¨Êòé„ÅØÁúÅ„Åç„Åæ„Åô„Åå„ÄÅ„Åæ„Åö `Parser` „ÅÆ„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶‰∏é„Åà„Çâ„Çå„Åü„Éà„Éº„ÇØ„É≥Âàó„Çí `ParseOption` „Åß„Éë„Éº„Çπ„Åó„ÄÅÊÆã„Çä„ÅÆ„Éà„Éº„ÇØ„É≥Âàó„Çí `ParseUnionExpr` „Åß„Éë„Éº„Çπ„Åó„Åæ„Åô„ÄÇ„Åù„Åó„Å¶„ÄÅ„Åù„ÅÆÁµêÊûú„ÇíÂ≠ê„Éé„Éº„Éâ„Å®„Åó„Å¶„ÇÇ„Å§ `ASTNodeRoot` „Å®„Ç™„Éó„Ç∑„Éß„É≥„Çí„ÇÇ„Å£„Åü„Ç™„Éñ„Ç∏„Çß„ÇØ„ÉàÂûã„ÇíËøî„Åó„Åæ„Åô„ÄÇ

```ts: tregexp.ts
type TRegExpOption = {
  readonly anchorStart?: boolean; // ^
  readonly anchorEnd?: boolean; // $
};
```

‰ª•‰∏ä„Åß„ÄÅÊßãÊñáËß£ÊûêÂûã `Parser` „Çí„Å§„Åè„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„ÅüÔºÅ
‰∏é„Åà„Çâ„Çå„Åü„Éà„Éº„ÇØ„É≥Âàó„Å´ÂØæ„Åó„Å¶„ÄÅË¶èÂâá„Å´Âü∫„Å•„ÅÑ„ÅüÊßãÊñáÊú®„ÅåÁîüÊàê„Åï„Çå„Åæ„Åô„ÄÇ

## NFA

„Åì„Åì„Åß„ÅØ„ÄÅ‰∏é„Åà„Çâ„Çå„ÅüÊäΩË±°ÊßãÊñáÊú®„Åã„Çâ„Åù„ÅÆÊ≠£Ë¶èË°®Áèæ„ÇíÂèóÁêÜ„Åô„Çã NFA „ÇíÊßãÊàê„Åô„ÇãÂá¶ÁêÜ„ÇíÂûã„É¨„Éô„É´„ÅßÂÆüË£Ö„Åó„Åæ„Åô„ÄÇ„Åæ„Åö„ÅØ„ÄÅNFA „Åù„ÅÆ„ÇÇ„ÅÆ„ÅÆÂûã„ÇíÂÆöÁæ©„Åó„Åæ„Åó„Çá„ÅÜ„ÄÇ

```ts nfa.ts
// NFA „ÅÆÁä∂ÊÖã
type NFAState = string;
// „Ç§„Éó„Ç∑„É≠„É≥ÈÅ∑Áßª
type EpsChar = null;

// NFA „ÅÆÈÅ∑Áßª
type NFATransition = {
  from: NFAState;
  to: NFAState;
  char: string | EpsChar;
};

// NFA Âûã
type NFA = {
  states: NFAState[];
  transitions: NFATransition[];
  start: NFAState;
  accept: NFAState[];
};
```

ÂûãÂÆöÁæ©„ÅÆÈÄö„Çä„ÄÅÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅÆÂÆöÁæ©„ÅØ (ÊñáÂ≠óÈõÜÂêà)„ÄÅÁä∂ÊÖãÈõÜÂêà„ÄÅÈÅ∑ÁßªË¶èÂâáÈõÜÂêà„ÄÅÂàùÊúüÁä∂ÊÖã„ÄÅÂèóÁêÜÁä∂ÊÖãÈõÜÂêà„Åã„Çâ„Å™„Çä„Åæ„Åô„ÄÇ

## NFABuilder

Ê¨°„Å´„ÄÅNFA „ÇíÊßãÁØâ„Åô„ÇãÂûã `NFABuilder` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇÊßãÁØâÊñπÊ≥ï„ÅØ [Ê≠£Ë¶èË°®Áèæ„Å®ÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅÆÂØæÂøú](#Ê≠£Ë¶èË°®Áèæ„Å®ÊúâÈôê„Ç™„Éº„Éà„Éû„Éà„É≥„ÅÆÂØæÂøú) „ÅßÁ¥π‰ªã„Åï„Çå„Å¶„ÅÑ„Çã„ÇÇ„ÅÆ„Å´Âü∫„Å•„ÅÑ„Å¶„ÅÑ„Åæ„Åô„ÄÇ

### NFABuilder, NFABuilderInternal

„Åæ„Åö„ÅØ„Éà„ÉÉ„Éó„É¨„Éô„É´„ÅÆ `NFABuilder` „ÅÆÂÆöÁæ©„Åã„Çâ„Åß„Åô„ÄÇ

```ts: nfa-builder.ts
// ÊäΩË±°ÊßãÊñáÊú®„Åã„Çâ NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilder<Node extends ASTNodeRoot> = {
  nfa: NFABuilderInternal<Node>;
};

// ÊäΩË±°ÊßãÊñáÊú®„Åã„Çâ NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã (ÂÜÖÈÉ®Âûã)
type NFABuilderInternal<Node extends ASTNode> = Node extends ASTNodeRoot
  ? NFABuilderInternal<Node["child"]>
  : Node extends ASTNodeUnion
  ? NFABuilderUnion<Node>
  : Node extends ASTNodeConcat
  ? NFABuilderConcat<Node>
  : Node extends ASTNodePlus
  ? NFABuilderPlus<Node>
  : Node extends ASTNodeStar
  ? NFABuilderStar<Node>
  : Node extends ASTNodeOption
  ? NFABuilderOption<Node>
  : Node extends ASTNodeDot
  ? NFABuilderDot<Node>
  : Node extends ASTNodeChar
  ? NFABuilderChar<Node>
  : never;
```

„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶‰∏é„Åà„Çâ„Çå„ÅüÊäΩË±°ÊßãÊñáÊú® `ASTNodeRoot` „Åã„Çâ `NFA` „ÇíËøî„Åó„Åæ„Åô„ÄÇ`NFABuilderInternal` „Åß„ÅØ AST „ÅÆ„Éé„Éº„Éâ„ÅÆÁ®ÆÂà•„Å´Âøú„Åò„Å¶Âà•„ÄÖ„ÅÆ Builder „ÇíËøî„Åó„Åæ„Åô„ÄÇ

### NFABuilderUnion

```ts: nfa-builder.ts
// Ë´ñÁêÜÂíå„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderUnion<
  Node extends ASTNodeUnion,
  LNFA extends NFA = NFABuilderInternal<Node["left"]>,
  RNFA extends NFA = NFABuilderInternal<Node["right"]>
> = {
  states: [...LNFA["states"], ...RNFA["states"], `${Node["id"]}@0`];
  transitions: [
    ...LNFA["transitions"],
    ...RNFA["transitions"],
    { from: `${Node["id"]}@0`; to: LNFA["start"]; char: EpsChar },
    { from: `${Node["id"]}@0`; to: RNFA["start"]; char: EpsChar }
  ];
  start: `${Node["id"]}@0`;
  accept: [...LNFA["accept"], ...RNFA["accept"]];
};
```

„Åæ„Åö„ÄÅ`NFABuilderInternal` ÂÅ¥„Åã„Çâ‰∏é„Åà„Çâ„Çå„Åü `ASTNodeUnion` „Çí `Node` „Å®„Åó„Å¶„ÄÅÂ∑¶Âè≥„ÅÆ„Éé„Éº„Éâ `Node["left"]`, `Node["right"]` „Å´„Å§„ÅÑ„Å¶ÂÜçÂ∏∞ÁöÑ„Å´ `NFABuilderInternal` „ÇíÈÅ©Áî®„Åó„Å¶ `NFA` „ÇíÊßãÁØâ„Åó„Åü„ÇÇ„ÅÆ„Çí„Åù„Çå„Åû„Çå `LNFA`, `RNFA` „Å®„Åó„Åæ„Åô„ÄÇ„Åì„Çå„Åß„ÄÅÂâç„Å´Ëø∞„Åπ„ÅüÊßãÁØâÊñπÊ≥ï„ÅÆÂâçÊèê„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

2 „Å§„ÅÆ `NFA` „Åå„ÅÇ„Å£„Åü„Å®„Åç„Åù„Çå„Çâ„ÅÆË´ñÁêÜÂíå NFA „ÇíÊßãÊàê„Åô„Çã„Å´„ÅØ„ÄÅÊñ∞„Åü„Å´ÂàùÊúüÁä∂ÊÖã„ÇíÁî®ÊÑè„Åó„Å¶„ÄÅ„Åù„Åì„Åã„ÇâÂêÑ NFA „ÅÆÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª„Çí„Å§„Åè„Çã„Å®„Çà„ÅÑ„ÅÆ„Åß„Åó„Åü„ÄÇ„Çà„Å£„Å¶„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ NFA „Çí„Å§„Åè„Çã„Å®„Çà„Åï„Åù„ÅÜ„Åß„Åô„ÄÇ

- states: `LNFA`,`RNFA` „ÅÆÂÖ®„Å¶„ÅÆÁä∂ÊÖã + Êñ∞„Åó„ÅÑÁä∂ÊÖã `${Node["id"]}@0` „ÇíÁä∂ÊÖãÈõÜÂêà„Å®„Åô„Çã„ÄÇÁä∂ÊÖã„ÅÆË≠òÂà•Â≠ê„ÅØ„Å™„Çì„Åß„ÇÇ„Çà„ÅÑ„Åå„ÄÅË´ñÁêÜÂíå„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê + `@0` „Å®„Åô„Çã„ÄÇ
- transitions: `LNFA`,`RNFA` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª + Áä∂ÊÖã`${Node["id"]}@0` „Åã„Çâ `LNFA`, `RNFA`„ÅÆÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª„ÇíÈÅ∑ÁßªÈõÜÂêà„Å®„Åô„Çã„ÄÇ
- start: `${Node["id"]}@0` „ÇíÂàùÊúüÁä∂ÊÖã„Å®„Åô„Çã„ÄÇ
- accept: `LNFA`,`RNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„ÇíÂèóÁêÜÁä∂ÊÖãÈõÜÂêà„Å®„Åô„Çã„ÄÇ

### NFABuilderConcat

```ts: nfa-builder.ts
// ÈÄ£Êé•„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderConcat<
  Node extends ASTNodeConcat,
  LNFA extends NFA = NFABuilderInternal<Node["left"]>,
  RNFA extends NFA = NFABuilderInternal<Node["right"]>
> = {
  states: [...LNFA["states"], ...RNFA["states"]];
  transitions: [
    ...LNFA["transitions"],
    ...RNFA["transitions"],
    ...TransitionsFromStates<LNFA["accept"], RNFA["start"], EpsChar>
  ];
  start: LNFA["start"];
  accept: RNFA["accept"];
};
```

Âü∫Êú¨ÁöÑ„ÅØ„Å§„Åè„Çä„ÅØ `NFABuilderUnion` „Å®Âêå„Åò„Åß„Åô„ÄÇ‰ª•‰∏ã„ÅÆ NFA „Çí„Å§„Åè„Å£„Å¶„ÅÑ„Åæ„Åô„ÄÇ

- states: `LNFA`,`RNFA` „ÅÆÂÖ®„Å¶„ÅÆÁä∂ÊÖã
- transitions:`LNFA`,`RNFA` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª + `LNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„Åã„Çâ `RNFA` „ÅÆÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª
- start: `LNFA` „ÅÆÂàùÊúüÁä∂ÊÖã
- accept: `RNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã

„Åì„Åì„Åß„ÄÅ`TransitionsFromStates` Âûã„ÅØË§áÊï∞„ÅÆÈõÜÂêà `FromStates` „Å®Âçò‰∏Ä„ÅÆÈõÜÂêà `ToState`„ÄÅ„ÅÇ„ÇãÊñáÂ≠óÂàó `Char` „Çí„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶„ÄÅ`FromStates` „ÅÆÂêÑÁä∂ÊÖã„Åã„Çâ `ToState` „Å∏„ÅÆÊñáÂ≠ó `Char` „Å´„Çà„ÇãÈÅ∑Áßª„ÅÆÈõÜÂêà„ÇíËøî„Åó„Åæ„Åô„ÄÇ

```ts: nfa-builder.ts
type TransitionsFromStates<
  FromStates extends NFAState[],
  ToState extends NFAState,
  Char extends NFATransition["char"]
> = {
  [Index in keyof FromStates]: {
    from: FromStates[Index];
    to: ToState;
    char: Char;
  };
};
```

### NFABuilderPlus

```ts: nfa-builder.ts
// Êï∞ÈáèÂ≠ê + „Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderPlus<
  Node extends ASTNodePlus,
  CNFA extends NFA = NFABuilderInternal<Node["child"]>
> = {
  states: CNFA["states"];
  transitions: [
    ...CNFA["transitions"],
    ...TransitionsFromStates<CNFA["accept"], CNFA["start"], EpsChar>
  ];
  start: CNFA["start"];
  accept: CNFA["accept"];
};
```

„Åæ„Åö„ÄÅ`NFABuilderInternal` ÂÅ¥„Åã„Çâ‰∏é„Åà„Çâ„Çå„Åü `ASTNodeUnion` „Çí `Node` „Å®„Åó„Å¶„ÄÅ`Node` „ÅÆÂ≠êË¶ÅÁ¥† (`expr+` „ÅÆ `expr` „Å´ÂØæÂøú„Åô„Çã„Éé„Éº„Éâ) „Å´ÂØæ„Åó„Å¶ `NFABuilderInternal` „ÇíÈÅ©Áî®„Åó„Å¶Âæó„Çâ„Çå„Åü `NFA` „Çí `CNFA` „Å®„Åó„Åæ„Åô„ÄÇ

Á∂ö„ÅÑ„Å¶„ÄÅ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ NFA „ÇíËøî„Åó„Åæ„Åô„ÄÇ

- states: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÁä∂ÊÖã
- transitions:`CNFA` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª + `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„Åã„Çâ `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª
- start: `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã
- accept: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã

### NFABuilderStar

```ts: nfa-builder.ts
// Êï∞ÈáèÂ≠ê * „Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderStar<
  Node extends ASTNodeStar,
  CNFA extends NFA = NFABuilderInternal<Node["child"]>
> = {
  states: CNFA["states"];
  transitions: [
    ...CNFA["transitions"],
    ...TransitionsFromStates<CNFA["accept"], CNFA["start"], EpsChar>
  ];
  start: CNFA["start"];
  accept: [...CNFA["accept"], CNFA["start"]];
};
```

`NFABuilderPlus` „Å®„Åª„ÅºÂêå„Åò„Åß„Åô„ÄÇ‰ª•‰∏ã„ÅÆ NFA „ÇíËøî„Åó„Åæ„Åô„ÄÇ

- states: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÁä∂ÊÖã
- transitions:`CNFA` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª + `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã„Åã„Çâ `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã„Å∏„ÅÆ Œµ-ÈÅ∑Áßª
- start: `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã
- accept: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã + `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã

### NFABuilderOption

```ts: nfa-builder.ts
// Êï∞ÈáèÂ≠ê ? „Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderOption<
  Node extends ASTNodeOption,
  CNFA extends NFA = NFABuilderInternal<Node["child"]>
> = {
  states: CNFA["states"];
  transitions: CNFA["transitions"];
  start: CNFA["start"];
  accept: [...CNFA["accept"], CNFA["start"]];
};
```

„Åì„Å°„Çâ„ÇÇ `NFABuilderPlus` „Å®Âêå„Åò„Å§„Åè„Çä„Åß„Åô„ÄÇ‰ª•‰∏ã„ÅÆ NFA „ÇíËøî„Åó„Åæ„Åô„ÄÇ

- states: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÁä∂ÊÖã
- transitions:`CNFA` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª
- start: `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã
- accept: `CNFA` „ÅÆÂÖ®„Å¶„ÅÆÂèóÁêÜÁä∂ÊÖã + `CNFA` „ÅÆÂàùÊúüÁä∂ÊÖã

### NFABuilderDot

```ts: nfa-builder.ts
// „ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderDot<Node extends ASTNodeDot> = {
  states: [`${Node["id"]}@0`, `${Node["id"]}@1`];
  transitions: [
    {
      from: `${Node["id"]}@0`;
      to: `${Node["id"]}@1`;
      char: string;
    }
  ];
  start: `${Node["id"]}@0`;
  accept: [`${Node["id"]}@1`];
};
```

„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã„Åß„Åô„ÄÇ‰∏é„Åà„Çâ„Çå„Åü„ÉØ„Ç§„É´„Éâ„Ç´„Éº„Éâ„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê„Çí„ÇÇ„Å®„Å´Êñ∞„Åü„Å™Áä∂ÊÖã„Çí 2 „Å§ (`@0`, `@1`) „Å§„Åè„Çä„ÄÅ‰ª•‰∏ã„ÅÆ NFA „ÇíËøî„Åó„Åæ„Åô„ÄÇ

- states: `@0`, `@1`
- transitions: `@0` „Åã„Çâ `@1` „Å∏„ÅÆ‰ªªÊÑè„ÅÆÊñáÂ≠ó (`string`) „Å´„Çà„ÇãÈÅ∑Áßª
- start: `@0`
- accept: `@1`

### NFABuilderChar

```ts: nfa-builder.ts
// „É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã
type NFABuilderChar<Node extends ASTNodeChar> = {
  states: [`${Node["id"]}@0`, `${Node["id"]}@1`];
  transitions: [
    {
      from: `${Node["id"]}@0`;
      to: `${Node["id"]}@1`;
      char: Node["char"];
    }
  ];
  start: `${Node["id"]}@0`;
  accept: [`${Node["id"]}@1`];
};
```

„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éé„Éº„ÉâÂûã„Å´ÂØæÂøú„Åô„Çã NFA „ÇíÊßãÁØâ„Åô„ÇãÂûã„Åß„Åô„ÄÇ‰∏é„Åà„Çâ„Çå„Åü„É™„ÉÜ„É©„É´ÊñáÂ≠ó„Éé„Éº„Éâ„ÅÆË≠òÂà•Â≠ê„Çí„ÇÇ„Å®„Å´Êñ∞„Åü„Å™Áä∂ÊÖã„Çí 2 „Å§ (`@0`, `@1`) „Å§„Åè„Çä„ÄÅ‰ª•‰∏ã„ÅÆ NFA „ÇíËøî„Åó„Åæ„Åô„ÄÇ

- states: `@0`, `@1`
- transitions: `@0` „Åã„Çâ `@1` „Å∏„ÅÆ `ASTNodeChar` „ÅßÊåáÂÆö„Åï„Çå„ÅüÊñáÂ≠ó (`Node["char"]`) „Å´„Çà„ÇãÈÅ∑Áßª
- start: `@0`
- accept: `@1`

‰ª•‰∏ä„Åß„ÄÅNFA „ÅÆÊßãÁØâ„Å´Èñ¢„Åô„ÇãÂûã„ÅÆÂÆöÁæ©„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„ÅüÔºÅ

## NFAExec

Ê¨°„Å´„ÄÅÂÖ•ÂäõÊñáÂ≠óÂàó„Çí„ÇÇ„Å®„Å´ NFA „ÅÆÂãï‰Ωú„Çí„Ç∑„Éü„É•„É¨„Éº„Éà„Åô„ÇãÂûã `NFAExec` „ÇíÂÆöÁæ©„Åó„Å¶„ÅÑ„Åç„Åæ„Åô„ÄÇ

### NextStatesFromSingleState

„Åæ„Åö„ÅØ„ÄÅÈÅ∑ÁßªÈõÜÂêà `Transitions` „Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„ÅÇ„ÇãÁä∂ÊÖã `FromState` „Åã„ÇâÊñáÂ≠ó `Char` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã„ÇíÂàóÊåô„Åô„ÇãÂûã `NextStatesFromSingleState` „Çí„Å§„Åè„Çä„Åæ„Åô„ÄÇ

```ts: nfa-exec.ts
// ÈÅ∑ÁßªÈõÜÂêà Transitions „Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ
// „ÅÇ„ÇãÁä∂ÊÖã FromState „Åã„ÇâÊñáÂ≠ó Char „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã„ÇíÂàóÊåô„Åô„ÇãÂûã
type NextStatesFromSingleState<
  FromState extends NFAState,
  Char extends string | EpsChar,
  Transitions extends NFATransition[]
> = NextStatesFromSingleStateInternal<FromState, Char, Transitions>;

// ÂÜÖÈÉ®Âûã
type NextStatesFromSingleStateInternal<
  FromState extends NFAState,
  Char extends string | EpsChar,
  Transitions extends NFATransition[],
  Result extends NFAState[] = []
> = Transitions extends [
  infer Head extends NFATransition,
  ...infer Tail extends NFATransition[]
]
  ? [FromState, Char] extends [Head["from"], Head["char"]]
    ? NextStatesFromSingleStateInternal<
        FromState,
        Char,
        Tail,
        [...Result, Head["to"]]
      >
    : NextStatesFromSingleStateInternal<FromState, Char, Tail, Result>
  : Unique<Result>;
```

`NextStatesFromSingleStateInternal` „ÅØÂâçËø∞„ÅÆ 3 „Å§„ÅÆ„Éë„É©„É°„Éº„Çø„Å®„ÄÅÈÅ∑ÁßªÂèØËÉΩ„Å™Áä∂ÊÖãÈõÜÂêà `Result` „Çí„Éë„É©„É°„Éº„Çø„Å®„Åó„ÄÅÊúÄÁµÇÁöÑ„Å™ `Result` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

„Åæ„Åö„ÄÅ`Transitions` „ÇíÂ±ïÈñã„Åó„ÄÅÂÖàÈ†≠„ÅÆÈÅ∑Áßª `Head` „Å´ÁùÄÁõÆ„Åó„Åæ„Åô„ÄÇÊåáÂÆö„Åï„Çå„Åü `FromState` „Åå `Head` „ÅÆÈÅ∑ÁßªÂÖÉÁä∂ÊÖã `Head["from"]` „Åã„Å§„ÄÅÊåáÂÆö„Åï„Çå„Åü `Char` „Åå `Head` „ÅÆÈÅ∑ÁßªÊñáÂ≠ó `Head["char"]` „Åß„ÅÇ„ÇãÂ†¥Âêà„ÅØÈÅ∑Áßª„ÅåÂèØËÉΩ„Å™„ÅÆ„Åß `Head` „ÅÆÈÅ∑ÁßªÂÖàÁä∂ÊÖã `Head["to"]` „Çí `Result` „Å´Âê´„ÇÅ„Å¶ÂÜçÂ∏∞ÁöÑ„Å´Âá¶ÁêÜ„Åó„Åü `NextStatesFromSingleStateInternal` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

`Transitions` „ÅÆÂÖ®„Å¶„ÅÆÈÅ∑Áßª„ÅÆ„ÉÅ„Çß„ÉÉ„ÇØ„ÅåÁµÇ„Çè„Å£„Åü„Çâ `Result` „Å´„Å§„ÅÑ„Å¶ `Unique` „ÇíÈÅ©Áî®„Åó„Åü„ÇÇ„ÅÆ„ÇíËøî„Åó„Åæ„Åô„ÄÇ„Åì„Åì„Åß `Unique` „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´„ÄÅ„ÅÇ„ÇãÈÖçÂàóÂûã„Åã„ÇâÈáçË§áË¶ÅÁ¥†„ÇíÂèñ„ÇäÈô§„ÅÑ„ÅüÈÖçÂàóÂûã„ÇíËøî„Åó„Åæ„Åô„ÄÇ‰æã„Åà„Å∞ `Unique<[1, 2, 3, 2]>` „ÅØ `[1, 2, 3]` „Å®„Å™„Çä„Åæ„Åô„ÄÇ

```ts: unique.ts
// ÈÖçÂàóÂûã„ÅÆÈáçË§áË¶ÅÁ¥†„ÇíÂèñ„ÇäÈô§„ÅèÂûã
type Unique<T extends unknown[]> = UniqueInternal<T>;

type UniqueInternal<
  T extends unknown[],
  Result extends unknown[] = []
> = T extends [infer Head, ...infer Tail]
  ? Head extends Result[number]
    ? UniqueInternal<Tail, Result>
    : UniqueInternal<Tail, [...Result, Head]>
  : Result;
```

### NextStatesFromStates

„Å§„Åé„Å´„ÄÅÈÅ∑ÁßªÈõÜÂêà `Transitions` „Å´Âü∫„Å•„ÅÑ„Å¶„ÄÅ„ÅÇ„ÇãÁä∂ÊÖãÈõÜÂêà `FromStates` „Åã„ÇâÊñáÂ≠ó `Char` „ÅßÈÅ∑Áßª„Åß„Åç„ÇãÁä∂ÊÖã„ÇíÂàóÊåô„Åô„ÇãÂûã `NextStatesFromStates` „Çí„Å§„Åè„Çä„Åæ„Åô„ÄÇÂÖà„Åª„Å©„ÅÆ `NextStatesFromSingleState` „ÅÆÈÅ∑ÁßªÂÖÉ„ÅåË§áÊï∞„ÅÆ„Éê„Éº„Ç∏„Éß„É≥„Åß„Åô„ÄÇ

```ts: nfa-exec.ts
type NextStatesFromStates<
  FromStates extends NFAState[],
  Char extends string | EpsChar,
  Transitions extends NFATransition[]
> = NextStatesFromStatesInternal<FromStates, Char, Transitions>;

type NextStatesFromStatesInternal<
  FromStates extends NFAState[],
  Char extends string | EpsChar,
  Transitions extends NFATransition[],
  Result extends NFAState[] = []
> = FromStates extends [
  infer Head extends NFAState,
  ...infer Tail extends NFAState[]
]
  ? NextStatesFromSingleState<
      Head,
      Char,
      Transitions
    > extends infer NextStates extends NFAState[]
    ? NextStatesFromStatesInternal<
        Tail,
        Char,
        Transitions,
        [...Result, ...NextStates]
      >
    : NextStatesFromStatesInternal<Tail, Char, Transitions, Result>
  : Unique<Result>;
```

`FromStates` „ÅÆÂÖàÈ†≠Ë¶ÅÁ¥†Áä∂ÊÖã `Head` „ÇíÈÅ∑ÁßªÂÖÉ„Å®„Åó„Å¶ `NextStatesFromSingleState` „ÇíÈÅ©Áî®„Åó„ÄÅÈÅ∑ÁßªÂèØËÉΩ„Å™Áä∂ÊÖãÈõÜÂêà„Åå„ÅÇ„Çå„Å∞ `Result` „Å´ËøΩÂä†„Åó„Å¶ÊÆã„Çä„ÅÆÈÅ∑ÁßªÂÖÉÈõÜÂêà `Tail` „Å´„Å§„ÅÑ„Å¶ÂÜçÂ∏∞ÁöÑ„Å´Âá¶ÁêÜ„Åó„Åæ„Åô„ÄÇÂÖ®„Å¶„ÅÆ `FromStates` „Å´„Å§„ÅÑ„Å¶Âá¶ÁêÜ„ÅåÂÆå‰∫Ü„Åó„Åü„Çâ `Unique<Result>` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

### EpsilonClosure

„Åì„Åì„Åß„ÄÅÊñ∞„Åü„Å™Áî®Ë™û„Äå„Ç§„Éó„Ç∑„É≠„É≥ÈñâÂåÖ (Œµ-ÈñâÂåÖ)„Äç„ÇíÂ∞éÂÖ•„Åó„Åæ„Åô„ÄÇŒµ-ÈñâÂåÖ„Å®„ÅØ„ÄÅ„ÅÇ„ÇãÁä∂ÊÖã„Åã„Çâ Œµ-ÈÅ∑Áßª„ÅÆ„Åø„ÅßÈÅ∑ÁßªÂèØËÉΩ„Å™Áä∂ÊÖã„ÅÆÈõÜÂêà„ÅÆ„Åì„Å®„Çí„ÅÑ„ÅÑ„Åæ„Åô„ÄÇ„ÅÇ„ÇãÁä∂ÊÖãÈõÜÂêà `FromStates` „ÅÆ Œµ-ÈñâÂåÖ„ÇíËøî„ÅôÂûã `EpsilonClosure` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```ts: nfa-exec.ts
// „ÅÇ„ÇãÁä∂ÊÖãÈõÜÂêà„ÅÆ Œµ-ÈñâÂåÖ„ÇíËøî„ÅôÂûã
type EpsilonClosure<
  FromStates extends NFAState[],
  Transitions extends NFATransition[]
> = EpsilonClosureInternal<FromStates, Transitions>;

type EpsilonClosureInternal<
  FromStates extends NFAState[],
  Transitions extends NFATransition[],
  Result extends NFAState[] = FromStates
> = FromStates extends [
  infer Head extends NFAState,
  ...infer Tail extends NFAState[]
]
  ? NextStatesFromSingleState<
      Head,
      EpsChar,
      Transitions
    > extends infer ReachableStates extends NFAState[]
    ? EpsilonClosureInternal<
        [...Tail, ...Diff<ReachableStates, Result>],
        Transitions,
        [...Result, ...ReachableStates]
      >
    : EpsilonClosureInternal<Tail, Transitions, Result>
  : Unique<Result>;
```

`FromStates` „ÅÆÂÖàÈ†≠Ë¶ÅÁ¥† `Head` „ÇíÈÅ∑ÁßªÂÖÉ„Å®„Åó„Å¶‰∏ÄÂ∫¶„ÅÆ Œµ-ÈÅ∑Áßª„ÅßÂà∞ÈÅîÂèØËÉΩ„Å™Áä∂ÊÖãÈõÜÂêà„Çí `NextStatesFromSingleState` „ÅßÂèñÂæó„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÁµêÊûú„Çí `ReachableStates` „Å®„Åó„Åæ„Åô„ÄÇ`ReachableStates` „ÇíÈÅ∑ÁßªÂÖÉÁä∂ÊÖãÈõÜÂêà„Å´ËøΩÂä†„Åó„Å¶ÂÜçÂ∫¶ `NextStatesFromSingleState` „ÇíÈÅ©Áî®„Åó„Åü„ÅÑ„ÅÆ„Åß„Åô„Åå„ÄÅ„Åù„ÅÆ„Åæ„ÅæÂê´„ÇÅ„Çã„Å®ÈáçË§á„Åó„ÅüÁä∂ÊÖã„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„ÇãÈöõ„Å´Áä∂ÊÖã„ÅåÊ∏õ„Çâ„Å™„ÅÑ„ÅÆ„Åß `Result` „Å®„ÅÆÂ∑ÆÈõÜÂêà„ÇíÊ±Ç„ÇÅ„Å¶„ÄÅ‰∏ÄÂ∫¶Êé¢Á¥¢„Åó„ÅüÁä∂ÊÖã„ÇíÈô§Â§ñ„Åô„ÇãÂøÖË¶Å„Åå„ÅÇ„Çä„Åæ„Åô„ÄÇ

`FromStates` „ÅÆÂàùÊúüÂÄ§„Åã„ÇâË§áÊï∞„ÅÆ Œµ-ÈÅ∑Áßª„ÅßÂà∞ÈÅîÂèØËÉΩ„Å™Áä∂ÊÖã„ÅåÂÖ®„Å¶Ê±Ç„Åæ„Çã„Å® `FromStates` „ÅåÁ©∫„Å´„Å™„Çä„Åæ„Åô„ÄÇÁ©∫„Å´„Å™„Å£„Åü„Çâ `Unique<Result>` „ÇíËøî„Åó„Åæ„Åô„ÄÇ

‰∫å„Å§„ÅÆÈÖçÂàóÂûã„Å´„Å§„ÅÑ„Å¶„ÅÆÂ∑ÆÈõÜÂêà„ÇíÊ±Ç„ÇÅ„Çã `Diff` „ÅØ‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´ÂÆöÁæ©„Åß„Åç„Åæ„Åô„ÄÇ

```ts: diff.ts
// Â∑ÆÈõÜÂêà S\T „ÇíËøî„ÅôÂûã
type Diff<S extends unknown[], T extends unknown[]> = DiffInternal<S, T>;

type DiffInternal<
  S extends unknown[],
  T extends unknown[],
  Result extends unknown[] = []
> = S extends [infer Head, ...infer Tail]
  ? Exists<T, Head> extends true
    ? DiffInternal<Tail, T, Result>
    : DiffInternal<Tail, T, [...Result, Head]>
  : Result;
```

Âä†„Åà„Å¶„ÄÅExists, Equal Âûã„ÇÇ‰ΩøÁî®„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ„Åì„Åì„Åß„ÅØË™¨Êòé„ÇíÁúÅÁï•„Åó„Åæ„Åô„ÄÇ

```ts: exists.ts
// ÈÖçÂàóÂûã T „ÅÆ„Å™„Åã„Å´ U „ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Çã„Åã„Å©„ÅÜ„ÅãÂà§ÂÆö„Åô„ÇãÂûã
type Exists<T extends unknown[], U> = T extends [
  infer Head,
  ...infer Tail
]
  ? Equal<Head, U> extends true
    ? true
    : Exists<Tail, U>
  : false;
```

```ts: equal.ts
// X, Y „ÅÆÂûãÁ≠â‰æ°ÊÄß„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åô„ÇãÂûã
type Equal<X, Y> = (<T>() => T extends X ? 1 : 2) extends <
  T
>() => T extends Y ? 1 : 2
  ? true
  : false;
```

### NextStatesWithEpsilonClosure

„ÅÇ„ÇãÁä∂ÊÖãÈõÜÂêà `FromStates` „Å®ÈÅ∑ÁßªÈõÜÂêà `Transitions` „Åå„ÅÇ„Çã„Å®„Åç„ÄÅ`FromStates` „ÅÆ Œµ-ÈñâÂåÖ„ÇíÈÅ∑ÁßªÂÖÉÁä∂ÊÖãÈõÜÂêà„Å®„Åó„Å¶„ÅÇ„ÇãÊñáÂ≠ó `Char` „ÅßÈÅ∑ÁßªÂèØËÉΩ„Å™Áä∂ÊÖãÈõÜÂêà„ÅÆ Œµ-ÈñâÂåÖ„ÇíÊ±Ç„ÇÅ„ÇãÂûã„Åß„Åô„ÄÇÂÖ∑‰ΩìÁöÑ„Å´„ÅØ„ÄÅNFA „ÅÆ‰∏¶ÂàóÂÆüË°å„ÅÆÁâπÂÆöÊôÇÁÇπ„Åß„ÅÇ„ÇãÁä∂ÊÖãÈõÜÂêà„ÅåÊ±Ç„Åæ„Å£„Å¶„ÅÑ„ÇãÂ†¥Âêà„Å´„ÄÅÂÖ•ÂäõÊñáÂ≠ó„ÇíË™≠„ÅøËæº„Çì„ÅßÊ¨°„ÅÆÁä∂ÊÖãÈõÜÂêà„ÇíÊ±Ç„ÇÅ„ÇãÂûã„Åß„Åô„ÄÇ

```ts: nfa-exec.ts
type NextStatesWithEpsilonClosure<
  FromStates extends NFAState[],
  Char extends string,
  Transitions extends NFATransition[]
> = EpsilonClosure<
  NextStatesFromStates<
    EpsilonClosure<FromStates, Transitions>,
    Char,
    Transitions
  >,
  Transitions
>;
```

### NFAExec, NFAExecInternal

ÊúÄÂæå„Å´„ÄÅNFA „ÇíÂÆüË°å„Åô„ÇãÂûã `NFAExec`,`NFAExecInternal` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ

```ts: nfa-exec.ts
// NFA „ÇíÂÆüË°å„Åô„ÇãÂûã
type NFAExec<
  InputNFA extends NFA,
  InputString extends string
> = NFAExecInternal<InputNFA, InputString>;

// NFA „ÇíÂÆüË°å„Åô„ÇãÂûã (ÂÜÖÈÉ®Âûã)
type NFAExecInternal<
  InputNFA extends NFA,
  InputString extends string,
  States extends NFAState[] = [InputNFA["start"]],
  Accepted extends boolean[] = [],
  Histories extends NFAState[][] = []
> = InputString extends `${infer Head}${infer Tail}`
  ? NFAExecInternal<
      InputNFA,
      Tail,
      NextStatesWithEpsilonClosure<States, Head, InputNFA["transitions"]>,
      [...Accepted, IsAccepted<States, InputNFA>],
      [...Histories, States]
    >
  : {
      accepted: [...Accepted, IsAccepted<States, InputNFA>];
      histories: [...Histories, States];
    };

type NFAExecResult = {
  accepted: boolean[];
  histories: NFAState[][];
};

// Áä∂ÊÖãÈõÜÂêà„Å´ÂèóÁêÜÁä∂ÊÖã„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Çã„ÅãÂà§ÂÆö„Åô„ÇãÂûã
type IsAccepted<States extends NFAState[], InputNFA extends NFA> = Intersection<
  States,
  InputNFA["accept"]
> extends []
  ? false
  : true;
```

`NFAExecInternal` „ÅØ„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶ NFA `NFA`„ÄÅÂÖ•ÂäõÊñáÂ≠óÂàó `InputString`„ÇíÂèó„ÅëÂèñ„Çä„ÄÅ`InputString` „ÅÆÂÖàÈ†≠ÊñáÂ≠ó `Head` „ÇíÈ†ÜÊ¨°Ë™≠„ÅøÂèñ„Çä„Å™„Åå„Çâ `NextStatesWithEpsilonClosure` „Å´„Çà„Å£„Å¶Ê¨°„ÅÆÁä∂ÊÖãÈõÜÂêà„ÇíÊ±Ç„ÇÅ„Å¶ `NFAExecInternal` „ÇíÂÜçÂ∏∞ÁöÑ„Å´ÈÅ©Áî®„Åó„Åæ„Åô„ÄÇÁèæÂú®„ÅÆÁä∂ÊÖãÈõÜÂêà„ÅØ `States` „Å´Ê†ºÁ¥ç„Åï„Çå„Å¶„Åä„Çä„ÄÅ ÂêÑ„Çπ„ÉÜ„ÉÉ„Éó„Å´„Å§„ÅÑ„Å¶ÂèóÁêÜ„Åï„Çå„Åü„Åã„Å©„ÅÜ„Åã„Å®„Åù„ÅÆÊôÇÁÇπ„Åß„ÅÆÁä∂ÊÖãÈõÜÂêà„ÅØ„Åù„Çå„Åû„Çå `Accepted`, `Histories` „Å´Ê†ºÁ¥ç„Åï„Çå„Åæ„Åô„ÄÇ

‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å™ NFA „Å´ÂØæ„Åó„Å¶ ÊñáÂ≠óÂàó `aaa` „ÇíÂÖ•Âäõ„Åó„ÅüÂ†¥Âêà„ÅÆ `Accepted`, `Histories` „ÅØ„Åì„ÅÆ„Çà„ÅÜ„Å™ÊÑü„Åò„Å´„Å™„Çä„Åæ„Åô„ÄÇ

```mermaid
stateDiagram
    direction LR
        q0: q0 (start)
        q1: q1
        q2: q2
        q3: q3
        q4: q4
        q5: q5 (accept)
        q6: q6
    q0 --> q1: a
    q1 --> q2: Œµ
    q2 --> q3: a
    q2 --> q4: b
    q3 --> q5: Œµ
    q4 --> q5: Œµ
    q5 --> q6: .
    style q0 stroke:#000,fill:#fff;
    style q1 stroke:#000,fill:#fff;
    style q2 stroke:#000,fill:#fff;
    style q3 stroke:#000,fill:#fff;
    style q4 stroke:#000,fill:#fff;
    style q5 stroke:#000,fill:#fff,stroke-width:3px;
    style q6 stroke:#000,fill:#fff;
```

```ts
{
  accepted: [false, false, true, false];
  histories: [["q0"], ["q1", "q2"], ["q3", "q5"], ["q6"]];
}
```

`accepted` „Çí„Åø„Çã„Å®„ÄÅÂêÑÂÖ•ÂäõÊñáÂ≠ó„ÇíË™≠„ÅøËæº„Çì„Å†ÊôÇÁÇπ„Åß„Åù„Çå„ÅåÂèóÁêÜ„Åï„Çå„Çã„Åã„Å©„ÅÜ„Åã„ÅåÂàÜ„Åã„Çä„Åæ„Åô„ÄÇ‰∏ä„ÅÆ‰æã„Åß„ÅØ„ÄÅ‰∫åÊñáÂ≠óÁõÆ„Åæ„ÅßË™≠„ÅøËæº„Çì„Å†ÊñáÂ≠óÂàó `aa` „ÅåÂèóÁêÜ„Åï„Çå„Å¶„ÅÑ„Çã„Åì„Å®„ÅåÂàÜ„Åã„Çä„Åæ„Åô„ÄÇ„Åæ„Åü„ÄÅ`["q3", "q5"]` „Å´ÂèóÁêÜÁä∂ÊÖã `q5` „ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Çã„Åì„Å®„ÇÇÁ¢∫Ë™ç„Åß„Åç„Åæ„Åô„ÄÇ

‰ª•‰∏ä„Åß„ÄÅNFA „ÅÆÊßãÁØâ„ÉªÂÆüË°å„ÅÆ„Åü„ÇÅ„ÅÆÂûã„ÇíÂÆöÁæ©„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åó„Åü„ÄÇ

## TRegExp

„Åì„Çå„Åæ„Åß„Å´ÂÆöÁæ©„Åó„ÅüÂûã„ÇíÁµÑ„ÅøÂêà„Çè„Åõ„ÅüÈõÜÂ§ßÊàê„ÅÆÂûã `TRegExp` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Åì„ÅÆÂûã„ÅØ„Éë„É©„É°„Éº„Çø„Å®„Åó„Å¶Ê≠£Ë¶èË°®ÁèæÊñáÂ≠óÂàó `RegExpString` „ÇíÂèó„ÅëÂèñ„Çä„ÄÅÂ≠óÂè•Ëß£ÊûêÂûã `Lexer`„ÄÅÊßãÊñáËß£ÊûêÂûã `Parser`„ÄÅNFA ÊßãÁØâÂûã `NFABuilder` „ÇíÈ†ÜÊ¨°ÈÅ©Áî®„Åó„Å¶ `NFA` „ÇíÂæó„Åæ„Åô„ÄÇ

```ts: tregexp.ts
// Ê≠£Ë¶èË°®ÁèæÂûã
type TRegExp<RegExpString extends string> =
  TRegExpInternal<RegExpString>;

// Ê≠£Ë¶èË°®ÁèæÂûã (ÂÜÖÈÉ®Âûã)
type TRegExpInternal<
  RegExpString extends string,
  LexerRes extends LexerResult = Lexer<RegExpString>,
  Tokens extends Token[] = LexerRes["tokens"],
  ParserRes extends ParserResult = Parser<Tokens>,
  Option extends TRegExpOption = ParserRes["option"],
  AST extends ASTNodeRoot = ParserRes["ast"],
  NFA extends NFABuilder<AST>["nfa"] = NFABuilder<AST>["nfa"]
> = {
  readonly string: RegExpString;
  readonly tokens: Tokens;
  readonly ast: AST;
  readonly option: Option;
  readonly nfa: NFA;
};
```

## TRegExpTest

`TRegExp` „ÅßÊßãÁØâ„Åï„Çå„Åü `NFA` „Çí„ÇÇ„Å®„Å´ÂÖ•ÂäõÊñáÂ≠óÂàó `InputString` „ÅåÂèóÁêÜ„Åï„Çå„Çã„Åã„Çí„ÉÅ„Çß„ÉÉ„ÇØ„Åô„ÇãÂûã `TRegExpTest` „ÇíÂÆöÁæ©„Åó„Åæ„Åô„ÄÇ„Ç™„Éó„Ç∑„Éß„É≥„Å´„Å§„ÅÑ„Å¶„ÅÆÂá¶ÁêÜ„ÅÆË™¨Êòé„ÅØÁúÅÁï•„Åó„Åæ„Åô„ÄÇÊ†∏„Å®„Å™„Çã„ÅÆ„ÅØ `NFAExec` „ÅåËøî„Åô `Result` „ÅÆÂá¶ÁêÜ„Åß„ÄÅÂÖ•ÂäõÂ¢ÉÁïå„Ç¢„Çµ„Éº„Ç∑„Éß„É≥„ÅÆÊúâÁÑ°„Å´„Çà„Å£„Å¶‰ª•‰∏ã„ÅÆ„Çà„ÅÜ„Å´Âá¶ÁêÜ„ÇíÂàÜÂ≤ê„Åï„Åõ„Åæ„Åô„ÄÇ

- „Ç¢„Çµ„Éº„Ç∑„Éß„É≥ÁÑ°„Åó: ÂÖ•ÂäõÊñáÂ≠óÂàó„ÅÆÂêÑÊñáÂ≠ó„ÇíÂÖàÈ†≠„Å®„Åø„Å™„Åó„Å¶„Åù„Çå„Åû„Çå„Å´„Å§„ÅÑ„Å¶ `NFAExec` „ÇíÂÆüË°å„Åó„ÄÅ„ÅÑ„Åö„Çå„Åã„ÅÆ `accepted` Âàó„Å´ÂèóÁêÜÁä∂ÊÖã„ÅåÂê´„Åæ„Çå„Å¶„ÅÑ„Çå„Å∞ `true` „ÇíËøî„Åô„ÄÇ„Å§„Åæ„Çä„ÄÅÂÖ•ÂäõÊñáÂ≠óÂàó„ÅÆ‰ªªÊÑè„ÅÆÈÉ®ÂàÜÊñáÂ≠óÂàó„Å´„Å§„ÅÑ„Å¶ `NFA` „ÇíÂÆüË°å„Åó„Å¶„ÅÑ„Åæ„Åô„ÄÇ
- ÂÖ•ÂäõÈñãÂßãÂ¢ÉÁïå„Ç¢„Çµ„Éº„Ç∑„Éß„É≥ `^` „ÅÇ„Çä: ÂÖ•ÂäõÊñáÂ≠óÂàó„Å´„Å§„ÅÑ„Å¶„Åù„ÅÆ„Åæ„Åæ `NFAExec` „ÇíÂÆüË°å„Åô„Çã„ÄÇ
- ÂÖ•ÂäõÊú´Â∞æÂ¢ÉÁïå„Ç¢„Çµ„Éº„Ç∑„Éß„É≥ `$` „ÅÇ„Çä: `accepted` Âàó„ÅÆÊú´Â∞æ„Åå `true` „ÅÆÂ†¥Âêà„Å´„ÅÆ„Åø `true` „ÇíËøî„Åô„ÄÇ

```ts: tregexp-test.ts
// ÂÖ•ÂäõÊñáÂ≠óÂàó„ÅåÊ≠£Ë¶èË°®ÁèæÂûã„Å´ÂêàËá¥„Åô„Çã„Åã„ÉÅ„Çß„ÉÉ„ÇØ„Åô„ÇãÂûã
type TRegExpTest<
  InputString extends string,
  InputTRegExp
> = InputTRegExp extends TRegExp<infer _>
  ? TRegExpTestInternal<InputString, InputTRegExp>
  : never;

type TRegExpTestInternal<
  InputString extends string,
  InputTRegExp extends TRegExp<string>,
  InputNFA extends InputTRegExp["nfa"] = InputTRegExp["nfa"],
  Option extends TRegExpOption = InputTRegExp["option"]
> = Option["anchorStart"] extends true
  ? NFAExec<InputNFA, InputString> extends infer Result extends NFAExecResult
    ? Option["anchorEnd"] extends true
      ? Equal<Last<Result["accepted"]>, true>
      : Exists<Result["accepted"], true>
    : never
  : TRegExpTestWithoutAnchorStart<InputString, InputNFA, Option>;

type TRegExpTestWithoutAnchorStart<
  InputString extends string,
  InputNFA extends NFA,
  Option extends TRegExpOption
> = InputString extends `${infer Head}${infer Tail}`
  ? NFAExec<InputNFA, InputString> extends infer Result extends NFAExecResult
    ? (
        Option["anchorEnd"] extends true
          ? Equal<Last<Result["accepted"]>, true>
          : Exists<Result["accepted"], true>
      ) extends true
      ? true
      : TRegExpTestWithoutAnchorStart<Tail, InputNFA, Option>
    : never
  : false;
```

„Åì„Çå„Çâ„ÅÆ `TRegExp`, `TRegExpTest` Âûã„ÇíÁî®„ÅÑ„Çã„Å®„ÄÅÊú¨Ë®ò‰∫ãÂÜíÈ†≠„ÅßÁ§∫„Åó„ÅüÂãï‰Ωú„ÅåÂÆüÁèæ„Åß„Åç„Åæ„Åô„ÄÇ

```ts
// Ê≠£Ë¶èË°®ÁèæÊñáÂ≠óÂàó„Åã„Çâ TRegExp Âûã„Çí‰ΩúÊàê
type EmailRegExp = TRegExp<"^.+@.+\\..+$">;
// Ê≠£Ë¶èË°®Áèæ„Å´„Éû„ÉÉ„ÉÅ„Åô„ÇãÊñáÂ≠óÂàó„Åß„ÅÇ„Çå„Å∞ true Âûã„Å´„Å™„Çã (ValidEmail: true)
type ValidEmail = TRegExpTest<"piyo@hiyoko.com", EmailRegExp>;
// „Éû„ÉÉ„ÉÅ„Åó„Å™„Åë„Çå„Å∞ false Âûã„Å´„Å™„Çã (InvalidEmail: false)
type InvalidEmail = TRegExpTest<"piyo.com", EmailRegExp>;
```

# „Åä„Çè„Çä„Å´

Ê≠£Ë¶èË°®Áèæ„Çí„ÅØ„Åò„ÇÅ„Å®„Åô„ÇãÂΩ¢ÂºèË®ÄË™û„ÅÆÂÆöÁæ©ÊñπÊ≥ï„Åã„Çâ„ÅØ„Åò„ÇÅ„Å¶„ÄÅTypeScript „ÅÆÂûã„Ç∑„Çπ„ÉÜ„É†‰∏ä„ÅßÂãï‰Ωú„Åô„ÇãÊ≠£Ë¶èË°®ÁèæÂá¶ÁêÜÁ≥ª„ÅÆ„Å§„Åè„Çä„Åã„Åü„ÇíËß£Ë™¨„Åó„Åæ„Åó„Åü„ÄÇÊú¨Ë®ò‰∫ã„ÇíÈÄö„Åó„Å¶Âûã„É¨„Éô„É´„Éó„É≠„Ç∞„É©„Éü„É≥„Ç∞„ÅÆ„Åä„ÇÇ„Åó„Çç„Åï„ÇíÂ∞ë„Åó„Åß„ÇÇÊÑü„Åò„Å¶„ÅÑ„Åü„Å†„Åë„Åü„ÇâÂπ∏„ÅÑ„Åß„Åô„ÄÇ‰ªäÂõû„ÅÆÂÆüË£ÖÂÜÖÂÆπ„ÅØ [„Åì„Å°„Çâ](https://www.typescriptlang.org/play/?ts=5.8.3#code/PQKgBApgHghgtgBwDYTCYAoDxhkMbWg8ZGAWEYH-Og4aaDq2oOhKg0gyCRDGACoBKEA5gKJQJiDR6oEkMgHXlACEYYALgE8EqDnBgBLJK07cwAXibKuCADwAiAHoA6ANQABUwB1LR0wBI9APgDc2XIVKBrBkB7DIGGGQIMMgJoMgNEMlFSA5gyAQgyAMQyADgxgYgBOAK6ovJ6AVgzBYAAUAGowSPIAJrIKSABcCSkQAJTiUqgFRaVyiuqa7NqMEADOYvoI8hIA9mYAFsMjANYjRgDGI3B6ADRgZYpa3C5uYH7+gOoMGYCKDHFgAGaFvWmZ2TkAkgB2AG6FJRuVF1d1DdJgT68Wh8Oiwutwev1BlMFktVus2kowQgdlhsOBkmJFL00JhfqgACLyc7nHQAZUgUDEEEexWxyUe00eIwA7o8ANoAXTWjApVJpdIZTNZnMcHUJxKeVMSj0KZO5KMkf3F50lEGlsowYDA5OgfNpYHpjJZ7K5mqYvOp+sNQpNKzNrF6ySQYgt-INguNnI6nIwoo0OspluxbPkj3OarAAAkIDBimtbEZQ+HEkxyhyzQB+dZQeT9Xo6RhraOx0W6oPVVJmrVZ5Wq9VIAvlblrB1OsSOKtgKq1x5SmUNxhNphrNkJ1vOosx4ocjtaqrjsSuPHrACOyVlAA01gBNP25AuOHK1dSinllt0bsBZgCMXbAACZj+f9TozYxfUeT+bn9jt1ewLeVT3pmFYQGaVSXEg1xLoqMg5nmBaulaHrClyYAAKp7megZumyZpJhGxZxmaCYESmg6KBg6bVqu64NkRayYUh2JJJWWo0axYHsXeXC5mI+YUUgjGznekHQVgsH-L2arXPMmIjI8r5agGeoCkaqF2lq2Gqe66kmr6HR1rJ8mPHW-ZykwCqNFJUrGfIClmRqynMbpNqcpp344chenufafRti51qehy3rpnuKnliGYaEVO8a2GRqaKNR-68QhhZRlOpZeSxNSdlmRkQHJ9mmdJ9aNoozZgKOtgLpOsYzp2VQFUVDmleZgmVQuInzv5zowdZAAyMCQtp5ZBahWEudVibRSmAD6awJUN-TJVmy1iOBYCPBAzxqv1fzoY88hrhAiE-q5wV7odx2pI5A5WQdR0nXdSmeTp422n5jrOoFKEmqFBkaKNuEJQxYCkbNiVIKtGWxi5C5so8yRwAARmqyU0ddz1tbKHVgF1jUYU9t04wOQ7TbVsPTt1+O9YuqJogkMzUjiEnWYwzOPB0ADeCSNFU-SJKGbBgAAvvtqAc9M1IDQACjAiQs0DnNgAAZGAvOwVUehywAgswHAAHJ6GLriSVL1LMPLitc8r0tc+rmv82AehW-rRsm+Ly4W4810KSCKuO3z0ja+hhv3AA8sbpve5zstIMk2J2yzQday7ssDehpKe2b7Oc6SYgKwH9tqxrwcQNrpKMPrOex-bEcICZxcp2Xad6BHsuMJH0de+bnP4iMLrJw7rfO3o+IR4wtd9-bADC4wKzos8uYLwtYYHo8hy7s+RjXzhgPMC+JFUy+93n9u648h8jIkBcK0PTAb07W96Lrhs7xHzBzVX+tTzHM-UkvtfRIHAaTNxHs-CuLs34fy-kbfEtc67UgALIwB4BobmZo9A5D0FUH2csFbUlcFqPQtRcGP3tlbQhjxiEuwAD7kJ9n7GhWCTCMLjgnXotC9AgHYfbO+iRuEZj4dSBuJluFGBEY8Ae9MSEGCkUA8YN8BGyLAHYPBnNFE31AcUVwXtUSgDACgKAEZ0Bsz+ANaAaoyQrySGvDoliTGJBeqSB6qBHFqhemaCKbpV6PDYB5H22Jzo+y9BoH04UXIAAM7Dc1BlOUWsSEqCVFlEkCREXLS1GOcChKC0F5TAB45xpNypCSqgmIJ3JOaoIQGyIiHIGrcSqBk86ehrB6AKYJaJSTIYcF6PMNBEBijzwVokuJvT+mDOKCktJ3EaJFJen0gZ0hpnkwqZzXoVS55Hx0EsqZIzEiOEaXMqo21dqJEJi07KYA-FsAKQskpeNpqVNyY8A5OgiJHJEnOLaO01SbUwXMpm9tegaJBbQrU+jJJFIXDzM0YgNlgupJyPRS4sCGOGi6Mxy5dZV0NiMYoqAMFgBKALOx-j95p1uTHHFeKCUQGYCMQe9xigdD0AAYj0LnP4uLGD4sJYyweS9JhIFZedXl-KiVgAlfSvcMrCWl0BSS4oVR5UMqZWIFltC27MAjpPLlZpD6KBVWAeexrUXmNQGq5hLKdDW2pJqsV1y1Vsj0CUPQM4OgxO5va3sLLRbJCidyq1dLCU2uKANO11DHUuRdW64oHq9zet9Y6gNABaJAQbaV8vpeG5gUabYxvFaGiArr3Weo0Mm6N-rkhpsSFmyS1qjoKVeimllsaS1loTSFDQcby0eQGma0VHac0Kt7SWjyzAh1Op0mqjoarAbSpLYq-CJqm3FVtW24oOwtRtzDt3A1WoUDnDEFUQdIrdFmiFmwcYp78bTotdmyVs8FIDMdQWh17bi2jtLfGxNXrYlbtFvMBt1k1UvqvjAR1kat0jslV2-9lbAPVuKMBjNoGeUlog2+ll+bYPfvg3+itYAq2Fv9fMOtGGQ0-uw1B1tKG4P0oQz2pdP7mMDunYxsdrHJWTs4wR+l86S2LrnY7VdqqsOvqg5ulDO7y7a1nlHWeusp60OPXe895qr3yBvXeqdF7H2NpLfHROMmyMzvLH27tSbkPmdFggKjPH6UmfzGafDzrO1EaE2xojHl+MeZ-d5yVInl1ia1KSpzhKXNmc-du7VY8M5Z0PQfC9J8DMYChWBktAiYt+os26KziGSO2di6LXojm1UCPo+Zrjv7y1BaY75s0-nZ3LvHT+kLgWwvKokz+nLxQP15bk23H+zBktGtFWlrTmXMM-rERugb7nWs+fLTZn1KHRYjAqyW+bLa3MMYE4S5jDWjtNa1C1yzbXItgTlaFjW4nru7dMot2T8WX4dy7lHcbqXTXpZm9RyVMjctFoC4R1bAH1t2eKNtn9MjBsg+W2D7tJ26vWfUGaUT93uIRbVUDl75m5O7rHhPVTZp-vXYOba-bNXDuo49X5o+tihb+MXaR0rFHYkHNFmmmHz6dnU9i7V477Wkf0+a4z861KNC3M65Kld4W11YaPsDllawDnDbHjvPehqj5pYVoZrLP7rbXA4IkRIN8Ufy56y7dlapzeJGS23DgzBdVjcfei8ACAFbXBTNiySxvrFBJcqEit1PrhPYLBsrKOkEoB6e7C86Srd2IteSizsIxG7FTwVsBAT3aGiwKUnuZmLeuSsFQMTsQKA-MO0IkHQary+q7AHHzPCkEZ6ARSCxNlf2KE7mRnkyVQW8mXbwP4qHqIXsQL00355yJbN+92qWFGCzQl+u+X2hY+FLZ6RHnjL8-h-FVekHkJnNfJaie8HnPl+MEF-XiCqaPstG30LokMQcUZrJlpv0YPZ+GkgUPxbQdHfzAEvyDhgCviURf3viqE4jFhphP2uWmgSmAN-3tncleWfx0RhkAMUmALWDALLggOAR0VgJqHgIBR7072pFBVeS4R7y30eCqD324n0RwDAB0HpGKjTWgAQEOS7AqA0B0EWEgzEB4O4H4P3Sjg4K4IUnEL4NFDoQ4JELfXkMOWXGr2bUeFr2q0F0l3JQCTfA2TQORVNC1EsRPUQJ0hDwBnvxoKmniThlP3tg-2SXKBMJNBhjwir0X1ozEB0PXQcgjXhxZUcDWAsLECCTCJ7wYh700OKgCJLTzRCO3W5HKG+TABCnOm8LmVj18Kk38IkIT1B3pQ8m4iYS0LKPYjyMSGuBryKLplq07Axn-DZADz8Nr0pniIUk6LpiyOyh7y1CULZDVQD1N3tzWA+haO4mGI+jWFGMX3GJvmmP-G6O0IkJSLSIqnKVsAiJeXqQyJ+UCMUi3TWHaIKN6O+hALWMuLbAyKH0X3qL4M2KhhHATD2I2Tqmpk2nONEJ0NOMKQgEsKjyXHYOEIKLUNFAqEEI4OQETkhOUIhN4P4KUJ0DhN6EhI0PyL+I2IFzyyZ2FkCWMOcNMIHSBMiOJOuRsPCTCnAWCSQMcPy31B9lcMhi6RJM8JAhyO4gDxc0SJowKJZRg1kzeN2PJP2KnBnCqK1F+LfX5OfUFOKDwxFKhgyP6J0m5OqMhl5M4VuJ+lp2lJJW1OxLlIaKuKaO4haKzDaMXz5LNLbDOJNKgz1LEHVKDEGLAGGIWNqIgCWMSEmL+hWKGKqjmOuzGLN2WJ7yzFlOdI2IBKeXePFM+KpmORn3AwKJeJ1MThdMdJ9I6PtOdHuIXzzIuLjJQy2LKWmg+JBS+OOQeJ9LtOeIBOrJoJRDBPRIROhKEMuDkhvgRMS3JFRP6AVkxP91tN1NxJlIO2uVuSJIfw5IiTpKmghi-wADEYBezEgrDywQ8tlqQXMcDF91zNydCe9RjOEVdUie9jyEUtyNlOxo9ywajrgbztECyXRacCkA9XyQF3zatwz7cozizrgBF-jyy6DDi7xzzE5MyjyNzbyXSiyA9QKyzzM9zHhegaZkLX8wK0KILQTcAdBhzEhOyYSdAezbyETRtPSODGDRzrJsKFZTypyacZyDC5z7CFzaTh56SNSVyIwfzty3RdzXkBFDyfSfzmK5lKtX9LzoigVBL7zuJHy3RnyIBJK-zPzuJoy4KTzNKSiotFiIyLkgUdKfSntcLYt0LMKe9S96UqsATvz4K3y+CCYZ9cDLK8trKsLF8LLUKrL8L0VCK6LkSoSyKKK+zQrQDO5u4aLyLnKSLQqsTzLW91jni8SEdyxZyjD5yqS-9F0hL9RkDIZFLcrrC-90KntxKXyEqpLuI1Uns5LDTSqaCHyXI1KNLXLGitL2IzKaq9KurzTacAKb4gKnKBq694yo9bLHtUrYKJLar3ykLdKEL-KvKIKfiVqXLJrwKoiCKOCIrEqJCwqNA9YDZDYZCtCES3ZzqaKScaKtdmAcgoB6gxyFqJrdD8T9DmdDCtJKTyr0DuK6CpocqZZfUPJ+KUxmFCrsRdzQbHgqEbYqIQJob-rIorSKcdkAS9AnBCYbi1rHVGItCojNoYaqofYZEYZcchUt0EC0bcIfZ3kEoDkCT-EjkQJwMsbwL1dNpvSTdjK0VGYwwYBWZlxDZVzcVC4qQOhblg11gEBegWaNAkYkAkB59xaVNEgIDeh5Am4V8tRzhzc4AqgNa74qRtURgTaJazaIBaFD4FYyUfqaKOAFaDkDc-gNa4UtRhyqRaDTapbS0ORtUtaMLdbio-aJbGAQ6daTI09vbX871-aoNbbV95h5gIBG4rbJbk6099EPctpLg00UZkhjVTFcRJINaAAhEu0VaxOXWncvPcJVYWrO6u0u4pPsWUSVHYcnKumuwlRIZfLHAumALO921APu9ul6eugyiAPcGexHelcvECSe2ujutUcyQjCbazTaBey7H9ZhFeiWtute5hHQbu3ewTWnPwo+3WE+gevw8+2VS+hVYazhW+++tUFzJ+wlGmPegrbLV-D+-utUKrC+n5f+-UBq1K4B9uiPcBu8SB7EamjaGiVegeuHBBk2q+2eg5WBte95LB2fPaS1MAdBtUM+s0JB67ZhAdT286T2jQch9esqQjdTRNSdeh65Rhsh4+kBlhzexra9W9bvJus0H2voKoKsjW11CR3oencGGqGRvQORhR71UXDkUWMwAABiiSDvhWjrDoUloM1PeOUaSG1qMYwrF24jHHMcMZMnkbMPYl5kNqWCqHUca3LS0d0cpUtsKWUeIrEAnxSwdvlsVsZ1FiqNcaNo8diQ0Z8aDSZnnECYTpCftuPnCZZun0yNoSCbie5gSZ0azS1A3PTszp2KMAGmUbKYzuCbQjsYltdVqcbg9X0d7r4fbsfqoZwcXsJT8LoYlpch4eYensa3YalPtC4Z0hGc6bXrGdO2EfqY7DEfjuTpMbMaaZUYDqcY-2YFSfWbaeDssccakc7E2d1ldQsdDscZsfYkacuY7wcfDrua1AqWeeMdXKNptvzGqa2ZafqZbAObfwUZdoiYVhEn0bWbfzPWBfqdoQBZSf+bTrqYn331IeYe-p6dftnpcz82mfLFmbvv4YWd-W3tEa9puR2ZPgOd9rRd3Q+YwrOdsdsFnnsZOZeecbedsCjo5c+e+Z2aXhqZRdabQjZa2aCdBddqPkhbyYTppYlbSahbAERdNWFfKfhfRbFrmYHqq2xdQFpwEXxaGYYaGaYZ1c8RKS3ovQpf1qpfWYVcedUeVeuZjvDuZfudZfZZuc5aqPeb5Ywq+aWB+aFeRY1YUfFadaVbWDBZ5q1GVfybVcVfvnpZVZFbvWmkjeafTYjbhaOa1YrotcSAj31dqye2Nd1mGbNd4eJanqtca3JYalWftd9sddkZ2dTddasdoKzaeYDacblZgKTajZTeVdVczfVdRbFbzYaXHprc-sSEwd6f3sB0Hmbbkakc8dO28eKbWC3bp00bMGvD0eOZ9eMY9a1CLwNtieK0Ka8e7UScn2TwKaKePafdCcydls7ByYTfldvaKd8dTo1c3fifvY9S0ePfafVqLcIeXYAZoxlcpY3aqn3eY0Sb3dA+3YfaPZPYMf7YveHu4jceNv-bA8PcA6BQRRfbI4g5KbmQyewdOwydTchTNF-aHdQ6I0faA7qZA7vaw-A5w6g9Id5bPcDYFfWdeiDbgB+arezqpHP0fhtrk5toZyLlNc1oDddWY6BqVTZCeEJSgCNLACyRGByWk5+Y5CqCL2I6qAs52f05pGgGVefaU4DsnwY9+31zJ3dyFsLqsXmFFsLd1i4EKleieAQAxAJbdA1o8gi4xALidu+uFkXQ1tC-mBeni7EFi6kki7EES7Xmg5C5MXmCHqVQBaGSqBRiZRQAgLjrAEmH6BvnkEkZrZts5FzqK-S68S1Cy+i-1Fi7NCy4K-8VZt+u1B2ZU4DrCSqj6+TZBYaQ8l1nTaGRcmq5GFq-+hpI8kjD4ma76Cm5zo5Bm8XI0GG4MO6XGS-yIjGTcMUFSVvu65KR7zm91kNI6h70Nl1B+YAHVdbxgwXFAFJZ4kARhHRFYyQdmvi1hXurnGWnH5K5lppluNWhkYfegUe6mhlIf1mYfHg8uNajlDTppdumuhY+g1hLOHzKCgUKuTVkeVu4x-gMfGecffa8eCeJajl33GvbyWuNnbBSe+eKeJv1mXOaVJJ7gWfUeBtZONP2u0JXu5O9xmoTJXofm4v8eouw2p2DJsiYYxIuI7xOJ1bvudm-uxAAeFage3lQfwfTozR7P1nDuFPnGWbkv-FAl4e5PRO3WFJTvwmbeQewfkgIeqGzf1mnffbXotRAfQfbeQ+Ieo+Rfffu3Efzsj4qjU-HGzREfs-w7fR584-ge7fQ+HetRk-eLCXrbpvnH8-jGffGWA-i+E-7eXpK-uR4e3FA-4-g+2-nuK+JPfaXfA6vf+3G+tPnHiiZma+juOhK-F1K+QbwtIYrkZ-5OIAIb4o2T3D5fa-ka0GI-faLPhYUAbaY-2JYigVY3M+e96+MK2rzoUCYx7aUYz-Ju9+juCkW+++y+eugVKmeMBMMqB0CsANyC8N-hAA17f47iXLOZPf02QekKYdMPZi-wgHv8xePeIsj-1L6KwXoeMBAS2Dpg0wsYqQUAcQNN6UgfmlfKTkPwO6f9XeanFMB7xFhKEb+CsMfmJyr4xdI6TfIGl9yoE7NK+7fOgZsi87+kmAXfSgflyEGiD-+S-BgaP3Fzqc2KTtNgdKw4FvhveGne-op2n7V8N+J3IGgoKQL4RV+U4Eflv0-wRh2S3DWfq7wP7-gBBMgyPt81P5QCA6F-LUFfzmQHJ3u8PR-tcgSjOC5edgwwRjRCGyDg2Ozf-kCg+4ADxBhpLSPDySGVNKYCYSIZgKBRFlMhx-OQY8iHB+DJB-bIgVcRIHExToXUaQdQLcH+IMBVIWgdEOTqWDlBzA1QcLGdoaD-SWg8fjoL4Gpcj+fQE-nUI8HJ0RBTQqkGrkz7FCuB3fXIUMNqFsB6hEAeQXQJaEZ8VBOkalOoPBbdDkhvQsIboKn7dUwhCvWwiCG0GmCV+13CwX0IDZWC7uSACfmJx9BeFk+UwhWG6VwhERXUxHBRj8L0A6cIhgw3oMMKWGjCqQsQuZO8I9J+CPS8QgAcgKuJfErmIwNplgMJjzDQRiw5YeMJk4B0PhEgvGG5TvCkDKhFAhmIYiSDsBeCQXdmDnnIEqAEAI3EWCwL9Bvgc8L0HPCyO76ggmR--bkRdxYFkknEDoFyDCkaKnUrEdeQUT9Tz701mSf+BxNKIdCoiu8zjAPIPXoHXJNRQ9TUZHhBSI9L8ISa-KlQ6C6i+grqRgnc15S1Zy85oxfFqN6DNN+gdzfrtiGYb14q4jgV1MLQ9QdBPRvKH0XoD9G6cr0U4BSEgAkBUsfqPUJkSyNoSKxYwkY6MdQSZZ0FExEYx4FGJVb9BesmY5MdmOjGMFmCqVAscUBTEj0x6WrfOtSLYC8E00jBOkX8D5HaAb8w9JMRWKLEqtICyiBOhmCq41cYwNCMAOwQMDhjCxOY4glAR0QDiwA63TbvvHYJ2AtWVIxWPWO4BppfaWKXELwRvguhzYOeCEBXl65a8ZBSXdoZ7yG5njWx3ARdFl1vE8ATRSIHQAlDmgiQswj448ZlzPEsiOeGIR8TTDOQkNvYR4voJqgH65cEuQoy8eNwfE54r8L425IjyV7nR4JSIX0ZcH9FncbxOeTCTADubGiqSpovWlBMiJ4S9A1ooGk9maa9joCC3FyJxEe4lcdAr3f8eePsRP9IY+gngcV0KgLgCkNEvQNOO0Q0h-R50JiaZVoiyh1o5Aq4tmxl4cNQIkFKoKlH4hyS2wCkrHt2jWCcQiywEkyneC-HgSLeSiDEM-hUSsTfx7FMiTlyey8iwJ-QUySMHMl0TLJ14vLiyLG6a9OelbDTh5CInWESJxUe8dZIvE6RvUjJW7jv3u6zInBEtdLlZN8nsSeR7VbiScPX7pcBJ2lXIB6SEkiSQEYkr4fqEkkJCUoa4GSZig0nOgtJjcIZEpL0kekfkak-MO3jp4KNGpQKJ8NclKk5Tep7EHfEyOPHOTXJwCSyXjDYmgFUq+kv5IZIgjfBXAQAA) (ÂÜçÊé≤) „ÅßÂãï‰ΩúÁ¢∫Ë™ç„Åô„Çã„Åì„Å®„Åå„Åß„Åç„Åæ„Åô„ÄÇ
